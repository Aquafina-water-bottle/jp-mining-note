<!--
  Listening
  X / Y

  X:
    Word
    Sentence
    Hybrid

  Y:
    Legacy
    None
    Word
    Sentence
-->

{{MAIN_FRONT}}

{{HINT}}



<!-- regular display -->
<!-- displays the audio and show/hide button, used only when testing pitch accent -->
{{^PADoNotShowInfoLegacy}}

  {{^PADoNotTest}} {{^PASeparateWordCard}}

    <!-- if the display is a sentence but we only want to test word pitch accent -->
    {{#IsSentenceCard}}

      <!-- if it's a TSC, then it's already shown -->
      {{^IsTargetedSentenceCard}}

        <!-- ankified `PASeparateSentenceCard or PATestOnlyWord` -->
        {{#PASeparateSentenceCard}} {{^PATestOnlyWord}}
          <button id="pa-button" oncontextmenu="event.preventDefault();"
            onclick="toggleHighlightWord()">Show</button>
        {{/PATestOnlyWord}} {{/PASeparateSentenceCard}}
        {{^PASeparateSentenceCard}} {{#PATestOnlyWord}}
          <button id="pa-button" oncontextmenu="event.preventDefault();"
            onclick="toggleHighlightWord()">Show</button>
        {{/PATestOnlyWord}} {{/PASeparateSentenceCard}}
        {{#PASeparateSentenceCard}} {{#PATestOnlyWord}}
          <button id="pa-button" oncontextmenu="event.preventDefault();"
            onclick="toggleHighlightWord()">Show</button>
        {{/PATestOnlyWord}} {{/PASeparateSentenceCard}}

        <!-- script here because too lazy to copy/paste -->
        <!-- https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button -->
        <script>
          var paButton = document.getElementById("pa-button");
          var d = document.getElementById("Display");

          function toggleHighlightWord() {
            if (paButton.innerText == "Show") {
              paButton.innerText = "Hide";
              d.classList.add("bold-yellow");
            } else {
              paButton.innerText = "Show";
              d.classList = "expression";
            }
          }
        </script>
      {{/IsTargetedSentenceCard}}

    {{/IsSentenceCard}}

  {{/PASeparateWordCard}} {{/PADoNotTest}}


  <!--
    if the display is a word: show sentence preview (spoilered)
  -->
  {{^IsSentenceCard}} {{^IsHoverCard}} {{^IsClickCard}}
    {{FULL_SENTENCE_FRONT}}
  {{/IsClickCard}} {{/IsHoverCard}} {{/IsSentenceCard}}


  <!-- we include the audio at the front regardless if we test PA or not -->
  <script>
    // =====================
    //  THIS PART IS A HACK
    // =====================
    // this hack is to not auto-play the audio at the front of the card
    // https://forums.ankiweb.net/t/disabling-audio-autoplay-for-certain-fields/6318/3
    // https://forums.ankiweb.net/t/controlling-display-and-function-of-audio-buttons/10234
    var elem = document.querySelector(".soundLink, .replaybutton");
    if (elem) {
      elem.click();
    }
  </script>

  <span id="audio-front-silence" style="display:none">{{PASilence}}</span>
  <span id="audio-front">
    {{#SentenceAudio}}
      <span id="sentence-audio"> {{SentenceAudio}} </span>
    {{/SentenceAudio}}
  </span>


{{/PADoNotShowInfoLegacy}}



