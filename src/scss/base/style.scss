/*
 * WARNING: This CSS is auto-generated.
 * Any changes to this CSS >>> WILL BE LOST <<< if you decide to update the card.
 *
 * If you want to modify the CSS without losing your changes, please only add CSS
 * to the end of this styles sheet (scroll all the way down).
 *
 * See: https://aquafina-water-bottle.github.io/jp-mining-note-prerelease/customcss/
 * for more info.
 */


/*
 *  ============
 *   GLOBAL CSS
 *  ============
 */

@use "common";

/* Backup font, primarily for Android. Defines "Noto Serif JP" and "Noto Sans JP" */

@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap');


/* defines the REM value */
html {
  font-size: 16px;
}


:root {
  @include common.common_vars;
}

.night_mode {
  @include common.night_mode_vars;
}


.card {
  font-family: var(--jp-sans);
  text-align: center;
  font-style: normal;

  color: var(--text-color);

  zoom: var(--zoom);
}


/*
 * a hack to no longer depend on the installed font (to speed up card load times).
 * see:
 * https://github.com/ankidroid/Anki-Android/issues/4856
 * https://github.com/ankidroid/Anki-Android/issues/5213
 */

.android {
  --jp-serif: #{common.$font-backup-serif};
  --jp-sans: #{common.$font-backup-sans};
}




/* fixing colors on mobile (TODO no longer necessary on alpha ver) */
.mobile .card.night_mode {
  color: white;
  background-color: #2f2f31;
}

/* revert colors for anki 2.1.55 */
.card.night_mode {
  a {
    color: #77ccff;
  }
}

/* can't figure out how to customize the replay button on mobile... */
/*a.replay-button svg path { fill: #2f2f31; }
a.replay-button svg circle { fill: #FFFAF0; }*/

/*.mobile .replaybutton svg path { fill: #2f2f31; }
.mobile .replaybutton svg circle { fill: #FFFAF0; }*/
/*.replaybutton svg path   { fill: #FFFAF0 !important; }
.replaybutton svg circle { fill: #2f2f31 !important; }*/
/*.replay-button svg {
  fill: black !important;
}*/


/* makes lists tolerable to look at */
ol, ul {
  margin-top: 0px;
  margin-bottom: 0.15em;
  padding-left: 1.5em;
}


/* makes the background of the top row of tables slightly lighter */
th {
  background: rgba(255, 255, 255, 0.09);
}

/* link colors change upon hover */

a:not([data-suppress-link-hover="true"]) {
  transition: color 0.15s;
}

a:not([data-suppress-link-hover="true"]):hover {
  color: var(--text-color-link-hover);
}

/*
 * makes the summary tag's clickable area not span the entire width of the given area
 *
 * NOTE: currently doesn't work as intended: it hides the triangle indicator
 * - only way to solve this is to set the display to `list-item`
 * - can't find a good fix for it other than `display: inline list-item`
 *   which doesn't seem to be supported on anki yet :(
 * - reverting back to the entire width span until further notice
 */

/*
details > summary {
  display: inline-block;
  width: min-content;
  white-space: nowrap;
  padding-left: 20px;
  padding-right: 20px;
}
*/

details.glossary-details > summary {
  user-select: none;
}

/* https://stackoverflow.com/questions/1269589/css-center-block-but-align-contents-to-the-left */
/* wrap elements in two divs: center-box-1 and center-box-2 */
.center-box-1 {
  text-align: center;
}

.center-box-2 {
  display: inline-block;
  text-align: left;
}

:root {
  --show-toggle-light: inline-block;
  --show-toggle-dark: none;
}

.night_mode {
  --show-toggle-light: none;
  --show-toggle-dark: inline-block;
}

.show-on-light-mode-only {
  display: var(--show-toggle-light);
}

.show-on-dark-mode-only {
  display: var(--show-toggle-dark);
}



@font-face {
  font-family: notoserif;
  src: url("NotoSerifJP-Regular.otf");
}
@font-face {
  font-family: notoserif;
  src: url("NotoSerifJP-Bold.otf");
  font-weight: bold;
}



@font-face {
  font-family: notosans;
  src: url('NotoSansJP-Regular.otf');
}
@font-face {
  font-family: notosans;
  src: url('NotoSansJP-Bold.otf');
  font-weight: bold;
}


.highlight-bold b {
  @include common.bold_highlight;
}

.override-display-none {
  display: none !important;
}

.override-display-inline-block {
  display: inline-block !important;
}


/* disables all <br> elements */
.disable-newlines br {
  display: none;
}



/*
 * formats the open right quote to be to the left of the entire text box
 */

//.left-align-quote {
//  text-indent: -1em;
//  padding-left: 1em;
//}


.sentence-quoted-display-flow {
}

.sentence-quoted-display-block {
  text-indent: -1em;
  padding-left: 1em;
}

/* unquoted sentence will get rid of quotes no matter what */
.sentence-unquoted-display-no-indent,
.sentence-unquoted-display-indent,
.sentence-unquoted-display-right-shifted {
  > .sentence-quote {
    display: none;
  }
}

.sentence-unquoted-display-indent {
  text-indent: 1em;
}

.sentence-unquoted-display-right-shifted {
  padding-left: 1em;
}




/*
 * Problem: Anki doesn't have {{field1 OR field2}}. This means to make something equivalent to:
 *   {{A OR B}} A {{/A OR B}}
 * one has to write:
 *   {{#A}} {{#B}} A or B {{/B}} {{/A}}
 *   {{^A}} {{#B}} A or B {{/B}} {{/A}}
 *   {{#A}} {{^B}} A or B {{/B}} {{/A}}
 * which is clearly not scalable past 2 fields.
 *
 * A non-javascript solution to deal with the above problem:
 * Specify an outer field with class
 * <div class="outer-display1 {{^A}} {{^B}} outer-display2 {{/B}} {{/A}}">
 *   <div class="inner-display1">
 *     A or B
 *   </div>
 *   <div class="inner-display2">
 *     neither A nor B is filled
 *   </div>
 * </div>
 */

.outer-display1 > .inner-display1 {
  display: inherit;
}
.outer-display1 > .inner-display2 {
  display: none;
}

.outer-display2 > .inner-display1 {
  display: none;
}
.outer-display2 > .inner-display2 {
  display: inherit;
}



/*
 * makes ruby text unselectable (and hence uncopyable)
 * - it makes the text unselectable, but the goal was to make the text also uncopyable
 * - however, the text remains copyable for some reason in anki
 *   WHEN this is combined with the clipboard inserter plugin
 * - text is not copyable in modern browsers like firefox
 */
ruby rt {
  user-select: none;
}


/*
 * For some reason, it appears that the furigana positioning is way too high on certain platforms.
 * Athough I would like these settings to work globally, it would sacrifice some minor things
 * that <ruby> normally takes care of automatically, such as not having additional spacing on
 * the left/right of the kanjis when the furigana takes up more space than the allocated kanjis.
 *
 * For now, it will be an option.
 */
.fix-ruby-positioning ruby {
  display: inline-flex;
  flex-direction: column-reverse;
}
.fix-ruby-positioning rt {
  padding-top: 3px;
  display: inline;
  line-height: 1;
}
.fix-ruby-positioning rb {
  display: inline;
  line-height: 1;
  text-align: center;
}


/* removes furigana entirely */
.hide-ruby ruby rt {
  display: none;
}


/* css to indicate that the image can be clicked on to zoom */
.img-clickable {
  cursor: pointer;
  transition: filter 0.3s;
}

.img-clickable:hover {
  filter: brightness(var(--image-hover-brightness));
}



/* makes code snippets look better */
code {
  background-color: var(--code-background-darken);
  border-radius: 10px;
  padding: .1em .3em;
  font-size: 85%;
}

// This hack is no longer needed with onShownHook!
//
///* THIS IS AN ANKIDROID HACK!!!
// * There seems to be a strange issue with using javascript to automatically play audio
// * and the mathjax module being ran (despite there being no mathjax: \[ and \]
// * are in regex expressions) that prevents the mathjax module from fully running for some reason?
// * and thus, doesn't remove mathjax-needs-to-render, making the card impossible to view for some reason
// */
//.android .card.mathjax-needs-to-render {
//  visibility: visible;
//}



/*
 *  ================
 *   FRONT SIDE CSS
 *  ================
 */

.card-header {
  position: relative; /* so pa-indicator works */
}

.card-footer {
  display: none;
}

.card-description {
  font-family: var(--jp-serif);
  color: var(--card-description-color);
  font-size: var(--description-font-size);
  line-height: 85%;
  text-align: left;
}

.card-description-ver {
  font-size: var(--description-footer-font-size);
}

.card-description__word-indicators {
  display: none; /* only displayed on mobile */
}

.card-description__word-indicator--selected {
  color: var(--accent);
}


/* decided that this would be an absolute position because
  setting the surroundings to float ends up not properly adjusting
  the height of the header, which then affects the content below
  (with this approach, card-description is not floated and can properly
  affect the height)
 */
.pa-indicator {
  position: absolute;
  display: flex;

  /* aling to top of header */
  margin-bottom: auto;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  height: 0;
}

.pa-indicator svg {
  height: 1.1em;
  margin-left: auto;
  margin-right: auto;
}

/* pitch accent indicator colors */
.pa-indicator-color--sentence {
  fill:  var(--pa-indicator-sentence-color);
  color: var(--pa-indicator-sentence-color);
}
.pa-indicator-color--word {
  fill:  var(--pa-indicator-word-color);
  color: var(--pa-indicator-word-color);
}
.pa-indicator-color--none {
  fill:  var(--pa-indicator-none-color);
  color: var(--pa-indicator-none-color);
}

/* contains the frequencies, and version for mobile */
.card-description-right {
  --card-description-color: var(--text-color--4);
  color: var(--card-description-color);

  float: right;
  font-family: var(--jp-serif);
}





/* info circle & tooltip */
.info-circle {
  position: relative;
  display: inline-block;
}

.info-circle > .info-circle-svg-wrapper path {
  fill: var(--card-description-color);
}


.info-circle--hover-color:hover,
.info-circle--frozen {
  > .info-circle-svg-wrapper path {
    fill: var(--info-circle-hover-color);
  }
}

.info-circle-svg-wrapper--togglable:active svg {
  filter: brightness(var(--icon-click-brightness));
}

.info-circle-text-wrapper {
  width: var(--tooltip-max-width);
  height: 0px;
  position: absolute;
}


/* Tooltip text */
.info-circle-text {
  position: absolute;
  display: inline-block;

  visibility: hidden;
  min-width: 200px;
  max-width: var(--tooltip-max-width);

  font-family: var(--jp-sans);
  font-size: var(--tooltip-font-size);
  text-align: left;

  background-color: var(--tooltip-background-darken);
  color: var(--text-color);
  padding: 10px;
  border-radius: 6px;

  position: absolute;
  z-index: 2;

  top: -10px;
  margin-left: 16px;
}

.info-circle-svg-wrapper--hoverable:hover,
.info-circle--frozen > .info-circle-svg-wrapper {
  + .info-circle-text-wrapper > .info-circle-text {
    visibility: visible;
  }
}

/* prevents the tooltip text from disappearing on hover */
.info-circle-text:hover {
  visibility: visible;
}


/* arrow */
.info-circle-text:after {
  content: "";
  position: absolute;

  /* position tooltip correctly */
  left: -16px;
  top: 11px;

  /* the arrow */
  border: 8px solid #000000;
  border-color: transparent var(--tooltip-background-darken) transparent transparent;

  z-index: 1;
}

.info-circle-svg-wrapper:hover:after,
.info-circle---frozen > .info-circle-svg-wrapper:hover:after {
  visibility: visible;
}


.info-circle-version {
  font-size: 0.8em;
  margin-top: 5px;
  display: none; /* hide for normal displays, only show on mobile */
}

/* leech text */
.info-circle-text-leech:not(:empty) {
  margin-bottom: 10px;
}
.info-circle-text-leech .info-circle__message:before {
  content: "Leech";
  font-weight: bold;
  color: var(--info-circle-leech-text-color);
}

.info-circle-leech > .info-circle-svg-wrapper path {
  fill: var(--info-circle-leech-color);
}

.info-circle--hover-color.info-circle-leech:hover, .info-circle-leech.info-circle---frozen {
  > .info-circle-svg-wrapper path {
    fill: var(--info-circle-leech-hover-color);
  }
}

/* debug text */
.info-circle-text-debug {
  font-family: common.$monospace-fonts;
}
.info-circle-text-debug:not(:empty) {
  margin-top: 10px;
}


/* tags */
.info-circle-text-tags {
  display: flex;
  align-items: center;
}
.info-circle-text-tags-text {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 5px;

  .info-circle-tag {
    border-radius: 3px;
    background: var(--info-circle-tag-bg-color);
    padding: 0.1em 0.2em;
    cursor: pointer;
  }

  .info-circle-tag--grey {
    color: var(--text-color--2);
  }

  [data-tag-value="leech"] {
    color: var(--info-circle-leech-text-color);
    font-weight: bold;
  }
}
.info-circle-text-tags:not(:empty) {
  margin-top: 10px;
}

.info-circle-text-tags svg {
  width: var(--info-circle-settings-svg-size);
  height: var(--info-circle-settings-svg-size);
  fill: var(--text-color);
  padding-right: 0.4em;
}

/* info text */
.info-circle-text-info:not(:empty) {
  margin-bottom: 10px;
}

/* warning text */
.info-circle-text-warning:not(:empty) {
  margin-bottom: 10px;
}
.info-circle-text-warning .info-circle__message:before {
  content: "Warning: ";
  font-weight: bold;
  color: var(--info-circle-warning-text-color);
}

.info-circle-warning > .info-circle-svg-wrapper path {
  fill: var(--info-circle-warning-color);
}

.info-circle--hover-color.info-circle-warning:hover, .info-circle-svg-wrapper--frozen {
  > .info-circle-svg-wrapper path {
    fill: var(--info-circle-warning-hover-color);
  }
}


/* error text */
.info-circle-text-error:not(:empty) {
  margin-bottom: 10px;
}

.info-circle-text-error {
  font-family: common.$monospace-fonts;

  /* breaks the word at the end of the line regardless of whitespace */
  word-break: break-all;
}

.info-circle-text-error .info-circle__message:before {
  content: "ERROR: ";
  font-weight: bold;
  color: var(--info-circle-error-text-color);
}

.info-circle-error > .info-circle-svg-wrapper path {
  fill: var(--info-circle-error-color);
}

.info-circle--hover-color.info-circle-error:hover, .info-circle-svg-wrapper--frozen {
  > .info-circle-svg-wrapper path {
    fill: var(--info-circle-error-hover-color);
  }
}

.info-circle-text-settings {
  line-height: 0%;
  margin-bottom: 10px;
  display: flex;
  gap: 5px; // 2.1.54 +
}

.info-circle-text-settings-border {
  border-bottom: 1px solid var(--text-color--4);
  margin-top: -4px;
  margin-bottom: 4px;
  line-height: 0px;
  width: 100%;
  //display: none;
}

/* shows the border if settings aren't empty */
//.info-circle-text-settings:not(:empty) + .info-circle-text-settings-border {
//  display: block;
//}
//
//.info-circle-text-settings:not(:empty) {
//  margin-bottom: 10px;
//}

.info-circle-text-settings svg {
  width: var(--info-circle-settings-svg-size);
  height: var(--info-circle-settings-svg-size);
  cursor: pointer;
  fill: var(--text-color);
}

.info-circle-text-settings svg:active {
  // doesn't look very good tbh
  // not sure what a good indicator for click is
  //filter: brightness(var(--icon-click-brightness));
}

.info-circle-text-settings__svg--red > path {
  fill: var(--info-circle-error-text-color);
}

.info-circle-text-settings__svg--disabled {
  cursor: default;
  fill: var(--text-color--4);
}




.below-display-wrapper {
  display: flex;
  flex-direction: column;
}

.below-display-top-row {
  display: flex;
  margin-left: auto;
  margin-right: auto;
  gap: 5px;

  .pa-button, .sentence_audio {
    margin-top: auto;
    margin-bottom: auto;
  }
}




.expression {
  font-family: var(--jp-serif);
}

.expression b {
  /*color: var(--accent);*/
  font-weight: normal;
}

.expression ruby rt { opacity: 0; }
.expression:hover ruby rt { opacity: 1; }


/* used in other cards where PA flag is not shown */
.expression--single {
  font-size: var(--sentence-font-size);
  font-family: var(--jp-serif);
}


/* used when the front side display is a word and not a sentence (increase font size) */
.expression--word {
  font-size: var(--word-font-size);
}
//.expression-box__word, .expression-box__hybrid-word {
//  font-size: var(--word-font-size);
//}


/* class used to identify exactly which div(s) contain a sentence, for js purposes */
.expression--sentence {
  display: inline-block;
  text-align: left;

  //text-indent: -1em;
  //padding-left: 1em;
  font-size: var(--sentence-font-size);
}
//.expression-box__sentence, .expression-box__hybrid-sentence, .expression-box__sf-sentence {
//  font-size: var(--sentence-font-size);
//}
.expression--hint-sentence {
  font-size: var(--full-sentence-font-size);
  max-width: common.$bp-max-width-backside;
}

//.card-wrapper--vertical-display .expression--sentence {
//  padding-top: 1em;
//  padding-left: 0em;
//}


.hint {
  font-size: 16px;
}


/*
 * -------------------------
 *  Sentence First card css
 * -------------------------
 */

.expression__sf {
  //position: relative;
  padding-bottom: 10px; /* overriden line-height causes the buttons underneath the word to be too close */
  display: inline-block; /* reduces hitbox */
  text-align: left; /* entire div is still centered! */
}

/* wrapper is to show css customization (≫ ), etc while
   hiding the true word in .expression__sf-word */
.expression__sf-word-wrapper, .expression__sf-word-wrapper .expression__sf-word {
  font-size: var(--sentence-font-size);
}
.expression__sf-word-wrapper:before {
  content: "≫";
  color: var(--accent);
}
.expression__sf-word-wrapper:after {
}

/* works with click on entire thing */
.expression__sf--click > .expression__sf-word-wrapper > .expression__sf-word {
  display: none;
}
.sentence-first-click-toggle:checked + .expression__sf > .expression__sf-word-wrapper > .expression__sf-word {
  display: inline;
}

/* only works on hovering over the sentence */
.expression__sf--hover > .expression__sf-word-wrapper > .expression__sf-word {
  display: none;
}
.expression__sf--hover .expression__sf-sentence--hover:hover + .expression__sf-word-wrapper > .expression__sf-word {
  display: inline;
}


.expression__sf--click-hover-effect {
  /* transition for opacity */
  transition: 0.3s;
}
.expression__sf--click-hover-effect:hover {
  opacity: 0.85;
  cursor: pointer;
}

/*
 * -----------------
 *  Hybrid card css
 * -----------------
 */



.expression__hybrid {
  //position: relative;
  padding-bottom: 10px; /* overriden line-height causes the buttons underneath the word to be too close */
  display: inline-block; /* reduces hitbox */
}


.expression__hybrid--click-hover-effect {
  /* transition for opacity */
  transition: 0.3s;
}
.expression__hybrid--click-hover-effect:hover {
  opacity: 0.85;
  cursor: pointer;
}

.expression__hybrid-word {
  display: block;
  border-bottom-width: 2px;
  border-bottom-style: solid;
  border-bottom-color: var(--hybrid-underline-color);
  line-height: 125%;
}


/* borders for hybrid words */
.expression__hybrid-word--hover-indicator {
  border-bottom-style: dotted;
}
.expression__hybrid-word--click-indicator {
  border-bottom-style: dashed;
}


/* sentence indicator: sentence should be tested */
.expression__hybrid-word--sentence-indicator {
  color: var(--accent);
  border-color: var(--accent);
}
/* word indicator: only the word should be tested */
.expression__hybrid-word--word-indicator {
  border-color: var(--text-color--3);
}


///* experimental vertical-display support, moves borders to left */
//.card-wrapper--vertical-display {
//  .expression__hybrid-word--hover-indicator {
//    border-bottom-style: none;
//    border-left-style: dotted;
//  }
//  .expression__hybrid-word--click-indicator {
//    border-bottom-style: none;
//    border-left-style: dashed;
//  }
//}


/* used to specify that hovering toggles between word/sentence */
.expression__hybrid-sentence {
  display: none;
}

/*
  inline block is so the div doesn't expand all the way to the left/right
  (i.e. so the border underneath the word doesn't expand)
 */
.expression__hybrid--hover.expression__hybrid--hint .expression__hybrid-word {
  display: inline-block;
}

/* hover behavior for non-hint cards */
.expression__hybrid--hover:not(.expression__hybrid--hint):hover {
  > .expression__hybrid-word {
    display: none;
  }
  > .expression__hybrid-sentence {
    display: block;
  }
}

/* hover behavior for hint cards */
.expression__hybrid--hover.expression__hybrid--hint {
  // explicitly only words when hovering over the word
  > .expression__hybrid-word:hover + .expression__hybrid-sentence {
    display: block;
  }
}

.hybrid-click-toggle:checked + .expression__hybrid .expression__hybrid-word {
  display: none;
}
.hybrid-click-toggle:checked + .expression__hybrid .expression__hybrid-sentence {
  display: block;
}
.hybrid-click-toggle:checked + .expression__hybrid.expression__hybrid--hint .expression__hybrid-word {
  display: inline-block;
}

/*
  - inline block is so the div doesn't expand all the way to the left/right
    (i.e. so the border underneath the word doesn't expand)
 */
.expression__hybrid--hover.expression__hybrid--hint .expression__hybrid-word {
  display: inline-block;
}



.sentence-quote {
}

/*
 * formats the open quote to be to the left of the entire text box
 */
.sentence-quote--open {
}

.sentence-quote--close {
}



.popup-menu {
  position: fixed;

  /* bless flex boxes */
  display: flex;
  align-items: center; /* Vertical center alignment */
  justify-content: center; /* Horizontal center alignment */
  flex-direction: column;
  row-gap: 3px;

  bottom: 30px;
  right: 30px;

  z-index: 30;
}

.popup-menu--animate {
  display: flex;
  align-items: center; /* Vertical center alignment */
  justify-content: center; /* Horizontal center alignment */

  width: 250px;
  min-height: 65px;
  text-align: center;
  padding: 10px;

  border-radius: 4px;
  background-color: var(--tooltip-background-darken);

  animation-name: popup-menu-in, popup-menu-stay, popup-menu-fade;
  animation-delay: 0s, 0.6s, 3.6s;
  animation-duration: 0.6s, 3s, 0.75s;
  opacity: 0;
}



@keyframes popup-menu-in {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes popup-menu-stay {
  from {
    opacity: 1;
  }
  to {
    opacity: 1;
  }
}


@keyframes popup-menu-fade {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}





/*
 * --------------
 *  Mobile Popup
 * --------------
 */

.mobile-popup-wrapper {
  position: fixed;
  display: flex;
  height: calc(50vh);
  width: calc(100%);
  bottom: 0;
  left: 0;
  z-index: 10;
}


.mobile-popup {
  text-align: left;
  margin: auto;
  max-height: calc(100% - 2 * var(--mobile-popup-border));
  width: calc(100% - 2 * var(--mobile-popup-border));
  background-color: var(--tooltip-background-darken);
  bottom: var(--mobile-popup-border);
  left: var(--mobile-popup-border);

  border-radius: 6px;
  overflow: scroll;
  padding: 8px 10px 8px 10px;
}

:root:not(.mobile) .mobile-popup::-webkit-scrollbar {
  /* removes ugly scrollbar on PC */
  display: none;
}


/* close button + press animations */
.mobile-popup-title-close {
  height: 1.2em;
  position: sticky;
  display: flex;
  float: right;
  top: 0px;
  user-select: none;
}

.mobile-popup-title-close:not(.THIS-CLASS-DOES-NOT-EXIST) { /* temporary hack for minimalist mode */
  /* we have a backdrop-filter blur because I have no idea how to get rid of background text otherwise */
  backdrop-filter: blur(1.2px) !important; /* !important for minimalist mode */
  border-radius: 3px;
}

.mobile-popup-title-close svg {
  height: 1.2em;
  fill: var(--text-color);
  position: sticky;
}

.mobile-popup-title-close:active {
  box-shadow: 0px 0px 2px var(--text-color--2) !important; /* !important for minimalist mode */
}

.mobile-popup-title-close:active svg {
  margin-top: 1px;
}

/* hides all newlines on mobile popup sentences in particular */
.mobile-popup .hover-tooltip__sent-div br {
  display: none;
}


.mobile-popup .hover-tooltip__card b {
  font-weight: var(--bold-font-weight);
}




// looks like microsoft XP style...
//.mobile-popup-title-close:not(.CLASS-DOES-NOT-EXIST) { /* hack for non-fancy display... */
//  backdrop-filter: blur(5px) !important;
//  box-shadow: 1px 1px 1.5px var(--text-color--4) !important;
//}
//
//.mobile-popup-title-close svg {
//  height: 1.2em;
//  fill: var(--text-color);
//  position: sticky;
//}
//
//.mobile-popup-title-close:active {
//    box-shadow: 0px 0px 1px var(--text-color--4) !important;
//}
//
//.mobile-popup-title-close svg {
//  margin-right: 0px;
//}
//.mobile-popup-title-close:active svg {
//  margin-top: 1px;
//  margin-right: -1px;
//  margin-left: 1px;
//}


/*
 *  ===============
 *   BACK SIDE CSS
 *  ===============
 */


/*
 * adds a width constraint to the backside to make things look better
 * - only applied after the main definition header
 */
.back-side-restrict-width {
  max-width: common.$bp-max-width-backside;
  margin: auto;
  padding: 0px;

  display: flex;
  flex-direction: column;
}

.answer-border {
  border-bottom: 1px solid;
  margin-top: 10px;
  margin-bottom: 15px;
  width: min(90% + 5rem, 100%);
}



@include common.common;



/*
 * -------------------
 *  Definition header
 * -------------------
 */


/* contains the word, picture, and pitch accent */
/* no idea for a good name, so going to call it "def-header" == definition header */
.def-header {
  display: flex;
  font-size: 30px;
  justify-content: center;
  align-items: center;
  max-width: 820px;
  margin: auto;
  position: relative;
}

.dh-left { /* left */
  background: var(--background-darken);
  padding: 0.52em;
  border-radius: 5px;
  flex: 1; /* takes up all available space */
}

/* Adds padding to right/left to prevent word from overlapping indicators.
 * This is an extreme edge case. This shouldn't ever be visible
 * unless you have a duplicate of a very long word.
 */
.dh-left--with-similar-word-indicators {
  padding-left: 35px;
  padding-right: 35px;
}

/* PA cards only */
.dh-left--blue-border { /* left */
  border-style: solid;
  border-width: 1px;
  border-color: rgba(0, 71, 83, 1);
  padding: 0.50em;
}


.dh-left__reading {
  font-size: var(--reading-font-size);
  font-family: var(--jp-serif);
  white-space: nowrap; /* so the reading can expand ouside of the max width */
}

.dh-left__reading--kanji-selected {
  color: var(--accent);
}

.dh-left__word-pitch {
  margin-top: 15px;
  font-size: var(--reading-pitch-font-size);
  vertical-align: middle;
}


.dh-left__similar-words-indicators {
  position: absolute;
  display: flex;
  flex-direction: column;
  gap: 5px;
  left: 10px;
  top: 10px;
  font-size: 15px;
  line-height: 16px;
}

.dh-left__similar-words-indicator {
  display: none; /* so it's not shown and doesn't affect the card without javascript */
}

.dh-left__similar-words-indicator--visible {
  display: inline-block;
}

.dh-left__similar-words-indicators .hover-tooltip-wrapper {
  line-height: initial;
}

.dh-left__similar-words-indicators-main-word .hover-tooltip__word-span {
  //font-size: 24px;
  color: var(--accent);
  font-weight: bold;
}

.dh-left__similar-words-indicators .hover-wrapper .hover-text {
  user-select: none;
}

.dh-left__similar-words-indicator {
  color: var(--word-indicator-icon-color);
  //padding: 2px;
  //box-shadow: 1px 1px 2px var(--similar-words-box-shadow-color);
  //background: #2d2d2f
  //background: rgba(0, 0, 0, 0.2);
  //border-radius: 3px;
}
.dh-left__similar-words-indicator:hover {
  color: var(--word-indicator-icon-hover-color);
}

.dh-left__similar-words-indicator--new {
  color: var(--word-indicator-icon-new-color);
}
.dh-left__similar-words-indicator--new:hover {
  color: var(--word-indicator-icon-new-hover-color);
}

//.dh-left__similar-words-indicator.dh-left__similar-words-indicators--togglable:active .info-circle-svg path {
//  filter: brightness(var(--icon-click-brightness));
//}





/*
 * <span class="hover-wrapper">
 *   <span class="hover-text"> (kanji) </span>
 *   <span class="hover-tooltip-wrapper">
 *     <span class="hover-tooltip"> ... </span>
 *   </span>
 * </span>
 */


/*
 * kanji hover
 */
.hover-wrapper {
  position: relative;
}

/* Tooltip text */
.hover-text {
}

.hover-text--similar-words-indicator {
  width: 120%;
  display: inline-block;
  text-align: left;

  user-select: none;
}

.hover-tooltip {
  display: inline-block;
  min-width: 40px;
  background-color: var(--tooltip-background-darken);
  padding: 8px 10px 8px 10px;
  border-radius: 6px;
}

.hover-tooltip__pitch-accent {
  @include common.bold-pitch;

  /* cancels out bolded colors */
  b {
    --pa-overline-color: var(--text-color--1);
  }
  .nopron {
      color: var(--text-color--1);
  }
}


.hover-tooltip__pitch-accent:empty:before {
  content: "(N/A)"
}

.hover-tooltip__pitch-accent:not(.pa-word-highlight-pitch-overline) {
  /* cancels out extra colors */
  .pitchoverline:after, .downstep:before {
    --pa-overline-color: var(--text-color--1);
  }

  b .pitchoverline:after, b .downstep:before {
    --pa-overline-color: var(--text-color--2);
  }
}


/* used to highlight kanji-hover kanjis */
.hover-tooltip__word-span b {
  @include common.bold_highlight;
}

/* greys out the card if new (not reviewed yet) */
.hover-tooltip__card--new {
  color: var(--text-color--1);

  .hover-tooltip__pitch-accent {

    .pitchoverline:after, .downstep:before {
      --pa-overline-color: var(--text-color--1);
    }

    .nopron {
      color: var(--text-color--1);
    }

  }
}



@media (min-resolution: 2dppx) { /* >= 2dppx */

  .hover-tooltip__pitch-accent {
    /* cancels out bolded colors */
    b {
      --pa-overline-color: var(--text-color);
    }
    .nopron {
        color: var(--text-color);
    }
  }

  .hover-tooltip__pitch-accent:not(.pa-word-highlight-pitch-overline) {
    /* cancels out extra colors */
    .pitchoverline:after, .downstep:before {
      --pa-overline-color: var(--text-color);
    }

    b .pitchoverline:after, b .downstep:before {
      --pa-overline-color: var(--text-color--1);
    }
  }

  /* greys out the card if new (not reviewed yet) */
  /* this is repeated code so the above doesn't override the standard colors */
  .hover-tooltip__card--new {
    .hover-tooltip__pitch-accent {
      .pitchoverline:after, .downstep:before {
        --pa-overline-color: var(--text-color--1);
      }
    }
  }

}




///* tests for pixel density (>= 2ddpx condition is usually for phones) */
//@media (max-resolution: 2dppx) { /* <= 2dppx */
//  .pitchoverline:after, .downstep:before {
//    /* TODO HOW TO HANDLE THE DEFAULT CASE??? */
//    /*filter: opacity(0.7); /* because regular computer screens seem to display it brighter than normal? */
//  }
//}
//@media (min-resolution: 2dppx) { /* >= 2dppx */
//  .pitchoverline:after, .downstep:before {
//    filter: opacity(0.95); /* even phone screens still display it lighter than normal??? */
//  }
//}

.hover-tooltip__sent-div b {
  font-weight: normal;
}

.hover-tooltip__card--sentence-only .hover-tooltip__sent-div b {
  color: var(--accent);
  font-weight: bold;
}

.hover-tooltip__word-div--clickable {
  cursor: pointer;
}

/* requires the user to hover over the card div to see the pitch accent */
.hover-tooltip__card-div--hover .hover-tooltip__pitch-accent {
  visibility: hidden;
}
.hover-tooltip__card-div--hover:hover .hover-tooltip__pitch-accent {
  visibility: visible;
}

.hover-tooltip__card--separator {
  margin-top: 10px;
  border-bottom: 1px solid var(--text-color--4);
}



.hover-tooltip__pitch-accent {
  margin-left: 1em;
}

.hover-tooltip-wrapper {
  /* overrides any existing pitch accent coloring, if it exists */
  color: var(--text-color);

  font-size: 18px;
  font-family: var(--jp-sans);
  text-align: left;
  position: absolute;
  width: 620px;
  height: 0px;
  top: 100%;
  left: 0%;
  background-color: #FF0000;
  display: none;
  z-index: 1;
  margin-top: 5px;
  white-space: normal;
}

.hover-tooltip-wrapper--similar-words-indicator {
  top: -15px;
  left: 29px;
}

/*
 * "gap" class to be inserted to elements after the first one,
 * since flex can't be used
 */
.hover-tooltip--not-first {
  margin-top: 10px;
}

.hover-text:hover + .hover-tooltip-wrapper,
.hover-text.hover-text--frozen + .hover-tooltip-wrapper {
  display: inline-block;
}
/* prevents the tooltip text from disappearing on hover */
.hover-tooltip-wrapper:hover {
  display: inline-block;
}




/* arrow */
.hover-tooltip:after {
  content: "";
  position: absolute;
  /* position tooltip correctly */
  left: 19px;
  top: -16px;
  /* the arrow */
  border: 8px solid #000000;
  border-color: transparent transparent var(--tooltip-background-darken) transparent;
  z-index: 1;
}


.hover-tooltip--kanji-hover:before {
  content: "";
  width: 40px;
  position: absolute;
  /* position tooltip correctly */
  left: 0px;
  top: -16px;
  /* the arrow */
  border: 8px solid transparent;
  z-index: 1;
}


/* arrow */
.hover-tooltip--similar-words-indicator:after {
  /* position tooltip correctly */
  left: -16px;
  top: 11px;
  /* the arrow */
  border-color: transparent var(--tooltip-background-darken) transparent transparent;
}




/*
 * -----------------------------------------
 *  Def Header Left - Word PA bold override
 * -----------------------------------------
 * overwriting the bold ability:
 * - bold == not the correct sound used in the sound clip
 *
 */

.dh-left__word-pitch {
  @include common.bold-pitch;
}

.dh-left__word-pitch-text:empty:before {
  content: "(N/A)"
}


.pa-word-highlight-pitch-overline {
  .pa-group-heiban {
    --pa-overline-color: var(--text-heiban);
  }
  .pa-group-atamadaka  {
    --pa-overline-color: var(--text-atamadaka);
  }
  .pa-group-nakadaka {
    --pa-overline-color: var(--text-nakadaka);
  }
  .pa-group-odaka {
    --pa-overline-color: var(--text-odaka);
  }
  .pa-group-kifuku {
    --pa-overline-color: var(--text-kifuku);
  }
}

.pa-word-highlight-pitch-kana {
  .pa-group-heiban {
    color: var(--text-heiban);
  }
  .pa-group-atamadaka  {
    color: var(--text-atamadaka);
  }
  .pa-group-nakadaka {
    color: var(--text-nakadaka);
  }
  .pa-group-odaka {
    color: var(--text-odaka);
  }
  .pa-group-kifuku {
    color: var(--text-kifuku);
  }
}


.pa-word-highlight-heiban {
  color: var(--text-heiban);
}
.pa-word-highlight-atamadaka {
  color: var(--text-atamadaka);
}
.pa-word-highlight-nakadaka {
  color: var(--text-nakadaka);
}
.pa-word-highlight-odaka {
  color: var(--text-odaka);
}
.pa-word-highlight-kifuku {
  color: var(--text-kifuku);
}

.pa-sentence-highlight-heiban b {
  color: var(--text-heiban);
}
.pa-sentence-highlight-atamadaka b {
  color: var(--text-atamadaka);
}
.pa-sentence-highlight-nakadaka b {
  color: var(--text-nakadaka);
}
.pa-sentence-highlight-odaka b {
  color: var(--text-odaka);
}
.pa-sentence-highlight-kifuku b {
  color: var(--text-kifuku);
}








/*
 * ----------------------------
 *  Def Header Left - PA cards
 * ----------------------------
 */
.dh-left__bottom {
  justify-content: center;
  display: flex;
  align-items: center;
  font-size: 15px;
}

.dh-left__graph {
}

.dh-left__gap {
  font-size: 20px;
  padding-left: 10px;
  color: #d0d0d0;
}

.dh-left__audio-buttons {
  font-size: 23px;
  vertical-align: middle;
}

/* experimental mobile class */
//.dh-left__audio-buttons--around-word {
//  position: absolute;
//  bottom: 10px;
//  left: 10px;
//}



/*
 * ------------------
 *  Def Header Right
 * ------------------
 */


.dh-right {
  font-size: var(--picture-font-size);
  max-width: 400px;
  max-height: 210px;
  position: relative;
}


.def-header--has-img > .dh-right {
  /* this is padding to prevent overriding the margin-left, margin-right variables in responsive */
  padding-left: var(--dh-right-image-gap);
}


.dh-right__img {
  border-radius: 5px;
  display: block;
  min-width: 5px; /* for super skinny images? */
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;

  user-select: none;
}




///* experimental mobile class */
//.dh-right--around-word {
//  max-height: 50px !important;
//
//  .dh-right__img {
//    max-height: 50px !important;
//  }
//}



.dh-right__img-container-stop-blur-edges {
  /* removes blur overflow */
  overflow: hidden;
  border-radius: 5px;
}

.dh-right__img-container-blur-wrapper {
}


.dh-right__svg-eye {
  height: 24px;
  width: 24px;
  position: absolute;
  right: 8px;
  top: -10px;

  /* animation for eye dropping down */
  transition: transform 0.1s ease-out, opacity 0.06s ease-out;
  opacity: 0;

  stroke: none;
  fill: hsla(0, 0%, 90%, 1);
  filter: drop-shadow(1px 1px 2px rgb(0 0 0 / 0.4));

  /* disables display without nsfw class */
  display: none;
}

/* enables display when nsfw class exists */
.dh-right__show-eye + .dh-right__svg-eye {
  display: inline-block;
}

/* makes eye white on hover */
.dh-right__svg-eye:hover {
  cursor: pointer;
  fill: white;
}

/* show eye on hover of image (or eye) */
.dh-right__show-eye:hover + .dh-right__svg-eye, .dh-right__svg-eye:hover {
  transform: translateY(15px);
  opacity: 1;

  transition: transform 0.15s ease-out, opacity 0.1s ease-out;
}


/* no transition so it doesn't flash the user when flipping the card */
.img-blur-filter-init {
  filter: blur(30px);
}
.img-blur-filter {
  filter: blur(30px);
  transition: filter 0.2s;
}
.img-blur-filter-disable {
  transition: filter 0.2s;
}









/*
 * -------
 *  Modal
 * -------
 */


.modal {
  display: none; /* hidden by default */
  position: fixed; /* stay in place */
  z-index: 99; /* sit on top */
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto; /* enable scroll if needed */
  background-color: rgba(0, 0, 0, 0.75);

  /* resets zoom so the image maximizes properly */
  zoom: calc(1/var(--zoom));
}

.modal {
  animation-name: zoom;
  animation-duration: 0.25s;
}

/* Add Animation */
.modal-img {
  animation-name: zoom;
  animation-duration: 0.25s;

  /* prevents the zoomed-in image from exceeding the screen size */
  max-width: 90%;
  max-height: 90%;

  /*
   * center image vertically and horizontally
   * https://stackoverflow.com/a/11716065
   */
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
}

.modal-img__zoom-out {
  animation-name: zoom-out;
  animation-duration: 0.25s;
}


@keyframes zoom {
  0% {
    display: none;
    opacity: 0;
  }

  0.001% {
    display: block;
    opacity: 0;
  }

  100% {
    display: block;
    opacity: 100;
  }
}

@keyframes zoom-out {
  0% {
    display: block;
    opacity: 100;
  }
  99.999% {
    display: block;
    opacity: 0;
  }
  100% {
    display: none;
    opacity: 0;
  }
}


/*
 * ---------------
 *  Full sentence
 * ---------------
 */


/* wrapper to center properly */
.full-sentence-center {
  display: flex;
}

//.full-sentence-gradient {
//  position: absolute;
//  width: 100%;
//  height: 100%;
//}

.full-sentence {
  font-size: var(--full-sentence-font-size);
  margin: 0.3em 0 0.3em 0;
  font-family: var(--jp-serif);

  margin-left: auto;
  margin-right: auto;
  text-align: left;

  b {
    font-weight: var(--bold-font-weight);
  }
}


/* hover */
.full-sentence.full-sentence--ruby-opacity.full-sentence--ruby-hover ruby rt {
  opacity: 0;
}
.full-sentence.full-sentence--ruby-opacity.full-sentence--ruby-hover:hover ruby rt {
  opacity: 1 !important;
}

.full-sentence.full-sentence--ruby-size.full-sentence--ruby-hover ruby rt {
  font-size: 0px;
}
.full-sentence.full-sentence--ruby-size.full-sentence--ruby-hover:hover ruby rt {
  font-size: 0.5em !important;
}


/* click toggle */
.full-sentence-toggle + .full-sentence.full-sentence--ruby-opacity.full-sentence--ruby-toggle ruby rt {
  opacity: 0;
}
.full-sentence-toggle:checked + .full-sentence.full-sentence--ruby-opacity.full-sentence--ruby-toggle ruby rt {
  opacity: 1;
}

.full-sentence-toggle + .full-sentence.full-sentence--ruby-size.full-sentence--ruby-toggle ruby rt {
  font-size: 0px;
}
.full-sentence-toggle:checked + .full-sentence.full-sentence--ruby-size.full-sentence--ruby-toggle ruby rt {
  font-size: 0.5em;
}


///* keybind toggle */
// TODO
//.full-sentence.full-sentence--ruby-opacity.full-sentence--ruby-keybind ruby rt {
//  opacity: 1;
//}
//
//.full-sentence.full-sentence--ruby-size.full-sentence--ruby-keybind ruby rt {
//  font-size: 0.5em;
//}


/* adds transitions if specified */
/* thanks to Stazor#6633 for the idea and implementation */
.full-sentence.full-sentence--ruby-size.full-sentence--ruby-size-transition ruby rt {
  transition: 0.2s;
}
.full-sentence.full-sentence--ruby-size.full-sentence--ruby-size-transition.full-sentence--ruby-hover:hover ruby rt {
  transition: 0.4s;
}
.full-sentence-toggle:checked + .full-sentence.full-sentence--ruby-size.full-sentence--ruby-size-transition.full-sentence--ruby-toggle ruby rt {
  transition: 0.4s;
}

/* adds hover effect */
.full-sentence.full-sentence--ruby-toggle {
  cursor: pointer;
  //transition: filter 0.3s;
}
//.full-sentence.full-sentence--ruby-toggle:hover {
//  filter: brightness(var(--image-hover-brightness));
//}


/*
 * -----------------------------------
 *  Definitions and collapsable boxes
 * -----------------------------------
 */
//.all-definitions {
//  position: relative;
//}
.folder-tab {
  display: none;
}
.primary-def-folder-tab-text {
  display: none;
}




.glossary-blockquote {
  text-align: left;
  background: var(--background-darken);
  font-size: var(--glossary-font-size);
  border-left: 5px solid #ccc;
  margin: 0 5px;
  padding: 0.5em 10px;

  /* so pictures can be encased properly */
  overflow: hidden;

  p {
    display: inline;
  }

  b {
    font-weight: var(--bold-font-weight);
  }
}

.glossary-details {
  font-size: var(--glossary-font-size);
  margin: 0.5em 0 0 0;
}

.glossary-blockquote--hide-first-line .glossary-text ol li {
  .dict-group__tag-list {
    display: none;
  }
  .dict-group__glossary--first-line {
    display: none;
  }
  .dict-group__glossary--first-line-break {
    display: none;
  }
}

.glossary-blockquote--hide-tags .glossary-text ol li {
  .dict-group__tag-list {
    display: none;
  }
}

.glossary-blockquote--hide-extra-text .glossary-text ol li {
  .dict-group__glossary--first-line {
    display: none;
  }
}

.glossary-blockquote--hide-list-numbers ol {
  list-style: none;
  padding-left: 0em;
}


.glossary-primary-definition__img {
  display: flex; /* for some reason, this removes additional padding at the bottom */
  gap: var(--primary-def-picture-gap); /* gap between multiple images */

  img {
    border-radius: var(--primary-def-border-radius);
    max-width: var(--primary-def-picture-max-width);
    max-height: var(--primary-def-picture-max-height);
  }
}

/* increases the max width and height of the image when the definition is empty */
.glossary-primary-definition--no-definition .glossary-primary-definition__img {
  gap: calc(var(--primary-def-picture-gap) * var(--primary-def-picture-scale-no-def));

  img {
    border-radius: calc(var(--primary-def-border-radius) * var(--primary-def-picture-scale-no-def));
    max-width: calc(var(--primary-def-picture-max-width) * var(--primary-def-picture-scale-no-def));
    max-height: calc(var(--primary-def-picture-max-height) * var(--primary-def-picture-scale-no-def));
  }

}

/* removes floating pictures (TODO: what is this for???) */
.glossary-primary-definition--remove-pictures {

  .glossary-primary-definition__right .glossary-primary-definition__img {
    display: none !important;
  }

  .glossary-primary-definition__right--completely-hide {
    /* hides the right completely if no external links */
    display: none !important;
  }

  .glossary-primary-definition__left {
    display: none !important;
  }
}

/* added on the actual img tag */
.glossary-primary-definition__raw-img {
}

.glossary-primary-definition__right {
  /* padding between external links & picture if it exists */
  display: flex;
  flex-direction: column;
  gap: 5px;

  float: right;
  padding-left: 10px; /* so text doesn't go too close to the image */
  text-align: right;

  /* aligns boxes within float to right */
  .glossary__external-links, .glossary-primary-definition__img {
    margin-left: auto;
  }

  .glossary-primary-definition__img {
    flex-wrap: wrap;
    justify-content: flex-end;
  }
}


.glossary-primary-definition__wrapper {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* default: show to */
.glossary-blockquote--primary-definition {
  .glossary-primary-definition__right {
  }

  .glossary-primary-definition__left {
    display: none;
  }
}


/*
 * hides the right, shows the left if has either (javascript added) classes:
 * - glossary-blockquote--picture-below
 * - glossary-blockquote--picture-above
 */

/*
 * Purpose of glossary-primary-definition--auto-no-lenience class:
 *
 * if the definition is empty:
 *     place to left
 * else:
 *     placed to right
 */

.glossary-blockquote--primary-definition.glossary-blockquote--picture-below,
.glossary-blockquote--primary-definition.glossary-blockquote--picture-above,
.glossary-primary-definition--auto-no-lenience.glossary-primary-definition--no-definition {

  .glossary-primary-definition__right .glossary-primary-definition__img {
    display: none;
  }

  .glossary-primary-definition__right--completely-hide {
    /* hides the right completely if no external links */
    display: none;
  }

  .glossary-primary-definition__left {
    display: block;
  }
}

.glossary-primary-definition--no-definition .glossary-text {
  display: none;
}

/* flips the position of picture and glossary (so now picture is on top) */
.glossary-blockquote--picture-above {
  .glossary-primary-definition__wrapper {
    flex-direction: column-reverse;
  }
}




.glossary-details--grey {
  --glossary-grey-out:          var(--text-color--2);

  color: var(--glossary-grey-out);
}



.glossary-blockquote--small {
  font-size: var(--glossary-font-size--smaller);
}
.glossary-details--small {
  font-size: var(--glossary-font-size--smaller);
}


/* styles to all images within any definition blockquote */
.glossary__image-container {
  display: inline-block;
}

a.glossary__image-hover-text {
  text-decoration: none !important; /* override styles for ankidroid */
}

.glossary__image-hover-media {
  display: none;
}

.glossary__image-hover-text:hover ~ .glossary__image-hover-media {
  display: block;
  position: absolute;

  z-index: 2; /* so the hover image goes overtop of other images */
}

.glossary__image-hover-media {
  cursor: pointer;
  /* !important is added for ankidroid */
  /* see: https://docs.ankiweb.net/templates/styling.html#image-resizing */
  max-height: 500px !important;
  max-width:  100px !important;
  box-shadow: var(--glossary-image-hover-border) !important; /* !important to override minimalist-mode */
}

/* so the image doesn't disappear once you move your mouse away from the text */
.glossary__image-hover-media:hover {
  display: block;
  position: absolute;

  z-index: 2; /* so the hover image goes overtop of other images */
}



/* stylizes collapsed dictionaries */
.glossary-text ol li details.glossary-text__details {
  margin-left: 0.5em;

  .glossary-text__summary {
    .dict-group__tag-list, .dict-group__glossary--first-line {
      display: inline;
    }
  }

  .glossary-text__details-div {

    .dict-group__tag-list {
      display: none;
    }

    .dict-group__glossary--first-line-break {
      display: none;
    }

    border-left: 0.2em solid var(--text-color--4);
    margin-left: 0.25em;
    padding-left: 0.5em;
  }

}





/*
 * styles for the external links
 *
 * TODO: support for mobile (thinner screens likely require the external links to all
 * be in one column rather than two
 */

.glossary-text--extra-info {
  //display: grid;
  //grid-template-columns: 1fr max-content;
}



.glossary__external-links {
  display: flex;
  align-content: flex-start;
  justify-content: flex-end;
  flex-wrap: wrap;
  flex-direction: row;
  gap: var(--external-links-gap);
  max-width: common.maxWidthForXIcons(var(--external-links-max-icons-per-row));
}

/* used in extra info section */
.glossary__external-links--float {
  float: right;
  padding-left: 5px;
}

.glossary__external-links a {
  text-align: center;
  vertical-align: middle;

  min-width: var(--external-links-icon-size);
  height: var(--external-links-icon-size);
  line-height: var(--external-links-icon-size);
  font-size: var(--external-links-icon-font-size);

  color: var(--text-color) !important; /* !important for ankidroid */
  background: var(--external-links-background);
  text-decoration: none !important; /* !important for ankidroid */

  box-shadow: var(--external-links-box-shadow) var(--external-links-box-shadow-color) !important; /* !important to override minimalist-mode */
  border-radius: 2px;

  //transition: filter 0.2s;
}

.glossary__external-links img {
  background: transparent;
  width: var(--external-links-icon-size);
  height: var(--external-links-icon-size);
}

.glossary__external-links a:active .glossary__external-links-inner {
  margin-top: 1px;
  filter: opacity(0.6);
}

.glossary__external-links a:not(:hover) {
  filter: opacity(0.5) grayscale(0.5);
}



/*
 * ------------------------------
 *  Frequencies at the top-right
 * ------------------------------
 */
.frequencies {
  display: flex;
  gap: 10px;
  font-family: var(--jp-serif);
  font-size: var(--description-font-size);
  line-height: 85%;
}

.frequencies-display {
  display: flex;
  gap: 20px;
}

.frequencies__group {
  display: block;
  text-align: right;
}

.frequencies__number {
}

.frequencies__number-inner {
}

.frequencies__dictionary {
  font-size: var(--description-footer-font-size);
}

.frequencies-overflow {
  fill: var(--card-description-color);
  height: min-content;
}

.frequencies-overflow:hover {
  fill: var(--frequencies-overflow-hover-color);
}


.unknown-freq-number {
  display: none;
}

/*
The following can be used instead of the above to display the unknown frequency number
(default number for unkonwn frequencies):

.unknown-freq-number:before {
  content: " ("
}
.unknown-freq-number:after {
  content: ")"
}
 */



.hover-tooltip-wrapper--frequencies-overflow {
  /* 20px is to account for the width of the dropdown arrow I think */
  --overflow-min-width: 200px;
  --overflow-max-width: 400px;
  left: calc(-1 * max(min(60vw, var(--overflow-max-width)) - 20px, var(--overflow-min-width) - 20px));
  bottom: 0px;
  width: max(var(--overflow-min-width), min(60vw, var(--overflow-max-width)));
  text-align: right;
}

.hover-tooltip--frequencies-overflow {
  display: inline-flex;
  flex-wrap: wrap;
  column-gap: 20px;
  row-gap: 5px;
  text-align: right;
  justify-content: flex-end;
}

/* the arrow (removed) */
.hover-tooltip--frequencies-overflow:after {
  display: none;
}




/*
 * ---------------------
 *  pitch accent graphs
 * ---------------------
 */
.pa-graphs {
  display: flex;
  flex-wrap: wrap;
  gap: 5px 30px;
}

.pa-graphs__dictionary-inner:after {
  content: ":";
}

.pa-graphs__none {
  display: none;
}






///*
// * =======================
// *  vertical text support
// * =======================
// * TODO: test on mobile (padding & max-height!)
// */
//
//.card-wrapper--vertical-display.card-wrapper {
//  display: grid;
//  grid-template-rows: max-content 1fr;
//  height: calc(100vh - var(--vertical-display-header-height-calc));
//}
//
//.card-wrapper--vertical-display {
//  .card-header {
//    //border: solid 1px red;
//  }
//
//  .expression--sentence {
//    font-size: var(--vertical-sentence-font-size);
//  }
//
//
//  .card-main--front {
//    display: flex;
//    //border: solid 1px green;
//    writing-mode: vertical-rl;
//
//    .expression-wrapper {
//      // centers text
//      margin-left: auto;
//      margin-right: auto;
//      //border: solid 1px blue;
//    }
//  }
//
//  .card-main--back {
//    display: flex;
//    flex-direction: row-reverse;
//    margin-right: auto;
//    margin-left: auto;
//
//    /* so quote aligns with top better */
//    //.expression--sentence {
//    //  padding-top: 0em;
//    //}
//
//    .expression-wrapper {
//      writing-mode: vertical-rl;
//      height: calc(100vh - var(--vertical-display-header-height-calc) - var(--vertical-display-margin-top));
//
//      position: sticky;
//      top: 0px;
//    }
//
//    //  //border: solid 1px green;
//    //  writing-mode: vertical-rl;
//    //  margin-right: auto;
//    //  margin-top: auto; // I'm not sure why this works but it aligns the text to the top?
//
//    .back-side {
//      margin-top: var(--vertical-display-margin-top);
//      writing-mode: initial;
//      //margin-left: auto;
//    }
//
//
//    /* the line honestly looks ugly here */
//    .answer-border {
//      display: none;
//    }
//
//  }
//
//
//  /* only affects the front */
//  .below-display-top-row {
//    margin-top: 0px;
//    margin-bottom: auto;
//
//    .pa-button, .sentence_audio {
//      margin-left: auto;
//      margin-right: auto;
//    }
//  }
//
//
//}


/* TODO move to a new utilities folder */

.hidden {
  display: none;
}


