
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the jp-mining-note project.">
      
      
      
        <link rel="canonical" href="https://aquafina-water-bottle.github.io/jp-mining-note/setup/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Setup: Anki & Yomichan - jp-mining-note</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prerequisites" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="jp-mining-note" class="md-header__button md-logo" aria-label="jp-mining-note" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            jp-mining-note
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Setup: Anki & Yomichan
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Aquafina-water-bottle/jp-mining-note" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    jp-mining-note
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="jp-mining-note" class="md-nav__button md-logo" aria-label="jp-mining-note" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    jp-mining-note
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Aquafina-water-bottle/jp-mining-note" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    jp-mining-note
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../preface/" class="md-nav__link">
        Preface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alternatives/" class="md-nav__link">
        Alternatives
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Setup: Anki & Yomichan
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Setup: Anki & Yomichan
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-card" class="md-nav__link">
    Installing the Card
  </a>
  
    <nav class="md-nav" aria-label="Installing the Card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verifying-the-note-works" class="md-nav__link">
    Verifying the Note Works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anki-setup" class="md-nav__link">
    Anki Setup
  </a>
  
    <nav class="md-nav" aria-label="Anki Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-anki" class="md-nav__link">
    Updating Anki
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dark-mode" class="md-nav__link">
    Dark Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anki-add-ons" class="md-nav__link">
    Anki Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-anki-add-ons" class="md-nav__link">
    Required Anki Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-add-ons" class="md-nav__link">
    Optional Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-steps" class="md-nav__link">
    Final Steps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transfer-existing-notes" class="md-nav__link">
    Transfer Existing Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-the-note" class="md-nav__link">
    Updating the Note
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yomichan-setup" class="md-nav__link">
    Yomichan Setup
  </a>
  
    <nav class="md-nav" aria-label="Yomichan Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preliminary-steps" class="md-nav__link">
    Preliminary Steps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-fields" class="md-nav__link">
    Yomichan Fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-templates" class="md-nav__link">
    Yomichan Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-an-example-card" class="md-nav__link">
    Make an example card!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-templates-options" class="md-nav__link">
    Yomichan Templates Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other" class="md-nav__link">
    Other
  </a>
  
    <nav class="md-nav" aria-label="Other">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yomichan-appearance" class="md-nav__link">
    Yomichan Appearance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmdict" class="md-nav__link">
    JMdict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmdict-surface-forms" class="md-nav__link">
    JMdict Surface Forms
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-anki-add-ons" class="md-nav__link">
    Additional Anki add-on(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separate-pitch-accent-deck" class="md-nav__link">
    Separate Pitch Accent Deck
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enjoy-your-new-one-click-cards" class="md-nav__link">
    Enjoy your new one-click cards!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wait-i-dont-have-a-workflow-setup-yet" class="md-nav__link">
    Wait! I don't have a workflow setup yet!
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../setupeverythingelse/" class="md-nav__link">
        Setup: Everything Else
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../importing/" class="md-nav__link">
        Transfer Existing Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../updating/" class="md-nav__link">
        Updating
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cardtypes/" class="md-nav__link">
        Card Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../yomichantemplates/" class="md-nav__link">
        Yomichan Template Options (TODO)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../runtimeoptions/" class="md-nav__link">
        Runtime Options (TODO)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kanjihover/" class="md-nav__link">
        Kanji Hover (TODO)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../autopa/" class="md-nav__link">
        Auto Pitch Accent (TODO)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Developer Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Developer Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../building/" class="md-nav__link">
        Building
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compileopts/" class="md-nav__link">
        Compile-Time Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modding/" class="md-nav__link">
        Modding
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ & Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jpresources/" class="md-nav__link">
        Various Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-card" class="md-nav__link">
    Installing the Card
  </a>
  
    <nav class="md-nav" aria-label="Installing the Card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verifying-the-note-works" class="md-nav__link">
    Verifying the Note Works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anki-setup" class="md-nav__link">
    Anki Setup
  </a>
  
    <nav class="md-nav" aria-label="Anki Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-anki" class="md-nav__link">
    Updating Anki
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dark-mode" class="md-nav__link">
    Dark Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anki-add-ons" class="md-nav__link">
    Anki Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-anki-add-ons" class="md-nav__link">
    Required Anki Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-add-ons" class="md-nav__link">
    Optional Add-ons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-steps" class="md-nav__link">
    Final Steps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transfer-existing-notes" class="md-nav__link">
    Transfer Existing Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-the-note" class="md-nav__link">
    Updating the Note
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yomichan-setup" class="md-nav__link">
    Yomichan Setup
  </a>
  
    <nav class="md-nav" aria-label="Yomichan Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preliminary-steps" class="md-nav__link">
    Preliminary Steps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-fields" class="md-nav__link">
    Yomichan Fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-templates" class="md-nav__link">
    Yomichan Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-an-example-card" class="md-nav__link">
    Make an example card!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yomichan-templates-options" class="md-nav__link">
    Yomichan Templates Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other" class="md-nav__link">
    Other
  </a>
  
    <nav class="md-nav" aria-label="Other">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yomichan-appearance" class="md-nav__link">
    Yomichan Appearance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmdict" class="md-nav__link">
    JMdict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmdict-surface-forms" class="md-nav__link">
    JMdict Surface Forms
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-anki-add-ons" class="md-nav__link">
    Additional Anki add-on(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separate-pitch-accent-deck" class="md-nav__link">
    Separate Pitch Accent Deck
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enjoy-your-new-one-click-cards" class="md-nav__link">
    Enjoy your new one-click cards!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wait-i-dont-have-a-workflow-setup-yet" class="md-nav__link">
    Wait! I don't have a workflow setup yet!
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
<!-- Removes the edit button and replaces it with a view button -->

  
  
  <a
    href="https://raw.githubusercontent.com/Aquafina-water-bottle/jp-mining-note/master/docs/docs/setup.md"
    title="View source of this page"
    class="md-content__button md-icon"
  >
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
  </a>


  <h1>Setup: Anki & Yomichan</h1>

<p>A full sentence mining workflow requires two main parts:</p>
<ol>
<li>Text to make the cards from.</li>
<li>The card exporter, to create cards from the text.<ul>
<li>And optionally, the image and sentence audio from the media (if the media has either).</li>
</ul>
</li>
</ol>
<p>This page is dedicated to providing the
<span class="text-yellow"><strong>minimal setup</strong></span>
to create cards with this note type (part two),
on PC.</p>
<p>Part one (getting the text)
and the optional part of part two (getting the image and sentence audio)
are not documented on this page;
they instead documented under the <a href="../setupeverythingelse/">Setup: Everything Else</a>
page.</p>
<hr />
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>It is highly recommend that you are using the latest Anki version
(or as close as you can get to the latest Anki version), as the note is primarily tested
and maintained on the latest versions of Anki.
Additionally, it is recommeded to use the Qt6 version of Anki if possible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Worst case scenario, if any essential add-ons no longer work,
you can always downgrade back to your current version.</p>
</div>
<p>Similarly, if you downloaded Yomichan from a file, try updating that as well.
(Most users should have installed it from their browser's extension page, in which case
nothing has to be done).</p>
<p>Finally, notice that this website contains a search bar!
If you have a problem at any point, you may find the solution by searching for it.</p>
<hr />
<h2 id="installing-the-card">Installing the Card<a class="headerlink" href="#installing-the-card" title="Permanent link">&para;</a></h2>
<p>There are two ways of installing the card:</p>
<details class="info">
<summary>Option 1: The Automatic Way (click here)</summary>
<p>If you know what <code>git</code> and <code>python</code> is, here's all you have to do:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Windows</label><label for="__tabbed_1_2">MacOS &amp; Linux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git clone <span class="s2">&quot;https://github.com/Aquafina-water-bottle/jp-mining-note.git&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">cd</span> jp-mining-note
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">:</span><span class="c1">: Ensure you have Anki open, and with anki-connect running</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">:</span><span class="c1">: Also ensure that you have python 3.10+ installed.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">:</span><span class="c1">: It *MAY* work with lower versions of python, but I make no such guarantee. ;)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>python tools\install.py
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>git clone <span class="s2">&quot;https://github.com/Aquafina-water-bottle/jp-mining-note.git&quot;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">cd</span> jp-mining-note
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Ensure you have Anki open, and with anki-connect running</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Also ensure that you have python 3.10+ installed.</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># It *MAY* work with lower versions of python, but I make no such guarantee. ;)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># You may have to use `python3` instead of `python`.</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>python tools/install.py
</code></pre></div>
</div>
</div>
</div>
<p>The above does the following:</p>
<ul>
<li>Installs the latest version of the note</li>
<li>Installs the fonts required for the note</li>
</ul>
<p>If the above made no sense to you,
or you just want to install this normally,
see the second option below.</p>
</details>
<details class="info">
<summary>Option 2: The Manual Way (click here)</summary>
<ol>
<li>Go to the
    <a href="https://github.com/Aquafina-water-bottle/jp-mining-note/releases">releases page</a>
    and download the cards from the latest release.
    You should download the <code>{version}-jpmn_example_cards.apkg</code> file.</li>
<li>After you download the cards, import them by navigating to Anki by doing the following:<ul>
<li><code>File</code> (top left corner) →  <code>Import...</code></li>
</ul>
</li>
<li>By default, the custom fonts do not come with the <code>.apkg</code> file.
    To install these fonts, head over to this repository's
    <a href="https://github.com/Aquafina-water-bottle/jp-mining-note/tree/master/media">media folder</a>
    and download the 4 <code>.otf</code> files.</li>
<li>Move the <code>.otf</code> files into the <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">media folder</a>
    of your profile (<code>Anki2/PROFILENAME/collections.media</code>).</li>
</ol>
<p><div class="video-container"><video style="width: 100%; height: 100%" controls  ><source src="../assets/anki/manual_import-0.9.1.1.mp4" type="video/mp4" /></video></div></p>
</details>
<h3 id="verifying-the-note-works">Verifying the Note Works<a class="headerlink" href="#verifying-the-note-works" title="Permanent link">&para;</a></h3>
<p>You should see a deck <code>JPMN-Examples</code> in your collection.
View one of the cards and make sure the card looks similar to the one below:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Dark Theme</label><label for="__tabbed_2_2">Light Theme</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><a href="../assets/eg_fushinnsha.png"><img alt="Example card" src="../assets/eg_fushinnsha.png" /></a></p>
</div>
<div class="tabbed-block">
<p><a href="../assets/eg_fushinnsha_light.png"><img alt="Example light theme card" src="../assets/eg_fushinnsha_light.png" /></a></p>
</div>
</div>
</div>
<p>Please check the following in particular:</p>
<ol>
<li>
<p>The fonts should match very similarly with the above example.</p>
<p><a href="../assets/info_circle.png"><img align="right" alt="test" src="../assets/info_circle.png" /> </a></p>
</li>
<li>
<p>Notice how at the top left corner, the info circle (the "i" encased within the circle)
    is the default grey color.</p>
<p>If this circle is red or orange, there could be something wrong with the template.
Please see <a href="../faq/#errors-warnings" target="_blank">this</a> section for basic troubleshooting.</p>
</li>
<li>
<p>Clicking on the image to zoom should work out of the box.</p>
</li>
<li>
<p>If the furigana on your card seems to appear higher above the kanji compared to the picture,
    this is likely because you are using the older Qt5 version of Anki.
    Unfortunately, as this seems like a quirk of Qt5, there does not seem to be a way to fix it
    outside of upgrading Anki from a Qt5 version to a Qt6 version.</p>
</li>
</ol>
<hr />
<h2 id="anki-setup">Anki Setup<a class="headerlink" href="#anki-setup" title="Permanent link">&para;</a></h2>
<h3 id="updating-anki">Updating Anki<a class="headerlink" href="#updating-anki" title="Permanent link">&para;</a></h3>
<p>If you are updating Anki from an older version, this section aims to give some
general tips on updating Anki.
If you aren't upgrading Anki from an older version, you can skip this section.</p>
<h4 id="official-documentation">Official Documentation<a class="headerlink" href="#official-documentation" title="Permanent link">&para;</a></h4>
<p>The official documentation on how to install and upgrade Anki is shown below:</p>
<ul>
<li><a href="https://docs.ankiweb.net/platform/windows/installing.html">Windows</a></li>
<li><a href="https://docs.ankiweb.net/platform/mac/installing.html">MacOS</a></li>
<li><a href="https://docs.ankiweb.net/platform/linux/installing.html">Linux</a></li>
</ul>
<p>Note that for all three, there are additional sections in the table of contents to the left
that could be helpful.</p>
<h4 id="add-ons-breaking">Add-ons Breaking<a class="headerlink" href="#add-ons-breaking" title="Permanent link">&para;</a></h4>
<p>If an add-on (that worked in a previous version of Anki) no longer works, you have a few options you can try:</p>
<ul>
<li>As a sanity check, click the <code>Check for Updates</code> button on Anki's <code>Addons</code> window.</li>
<li>Check that the add-on supports the current version of Anki in the official AnkiWeb page.
  If the page says that the current Anki version is supported,
  try reinstalling it again from AnkiWeb.
  This is because occasionally, the <code>Check for Updates</code> button doesn't properly work.</li>
</ul>
<p><br></p>
<h3 id="dark-mode">Dark Mode<a class="headerlink" href="#dark-mode" title="Permanent link">&para;</a></h3>
<p>Although light mode is supported, the recommended theme for this note is dark mode.</p>
<p>The note automatically adjusts according to Anki's theme.
To change Anki's theme, head over to:</p>
<blockquote>
<p><code>Tools</code> →  <code>Preferences</code> →  <code>Basic</code> →  <code>Theme (dropdown)</code></p>
</blockquote>
<p><a href="../assets/anki/dark_mode.png"><img alt="install Anki addons" src="../assets/anki/dark_mode.png" /></a></p>
<p><br></p>
<h3 id="anki-add-ons">Anki Add-ons<a class="headerlink" href="#anki-add-ons" title="Permanent link">&para;</a></h3>
<p>There are certain add-ons that must be installed for this note type to work.</p>
<!--
There are also certain add-ons that will **not** be supported by this note type.
Please disable them and restart Anki before continuing.
-->

<h4 id="conflicting-add-ons">Conflicting Add-ons<a class="headerlink" href="#conflicting-add-ons" title="Permanent link">&para;</a></h4>
<p>There are no conflicting add-ons, since I'm not aware of any currently.
Let me know if you find one!</p>
<h4 id="downloading-add-ons">Downloading Add-ons<a class="headerlink" href="#downloading-add-ons" title="Permanent link">&para;</a></h4>
<p>To download an add-on, copy the add-on's code, and navigate to the following to paste the code: <br></p>
<blockquote>
<p><code>Tools</code> →  <code>Add-ons</code> →  <code>Get Add-ons...</code></p>
</blockquote>
<p><a href="../assets/anki/addons_install.png"><img alt="install Anki addons" src="../assets/anki/addons_install.png" /></a></p>
<p><br></p>
<h3 id="required-anki-add-ons">Required Anki Add-ons<a class="headerlink" href="#required-anki-add-ons" title="Permanent link">&para;</a></h3>
<h4 id="anki-connect">Anki-Connect<a class="headerlink" href="#anki-connect" title="Permanent link">&para;</a></h4>
<p><a href="https://ankiweb.net/shared/info/2055492159">(Official page)</a>
Code: <code>2055492159</code></p>
<p>Required for Yomichan and most other Anki-related automated tasks to work.
I use the default config that comes with the add-on.</p>
<div class="admonition note">
<p class="admonition-title">Note for Anki versions 2.1.49 and below</p>
<p>Anki versions 2.1.49 and below require a hack to the Anki-Connect
config for certain features within the card to work.
In particular, Anki-Connect is used for the "Kanji Hover" feature and the
"Open Fields on New Card" feature.</p>
<p>To make those features work,
add <code>"null"</code> to the <code>webCorsOriginList</code> list in the Anki-Connect config file.
An example of how the config should look is shown below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>&quot;webCorsOriginList&quot;: [
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    &quot;http://localhost&quot;,
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    &quot;null&quot;
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>]
</code></pre></div>
<p>Of course, this <a href="https://w3c.github.io/webappsec-cors-for-developers/#avoid-returning-access-control-allow-origin-null">isn't very safe</a>
and it is highly recommended that you upgrade Anki to avoid this problem.</p>
<p>If you aren't interested in those features, you can skip this step and
disable them in the <a href="../runtimeoptions/" target="_blank">runtime options</a>.</p>
</div>
<p><br></p>
<h3 id="optional-add-ons">Optional Add-ons<a class="headerlink" href="#optional-add-ons" title="Permanent link">&para;</a></h3>
<p>These are a set of optional, but useful add-ons that can easily work with the card.
If this is your first time here, I recommend skimming through the descriptions
and choosing the add-ons that seem appealing for you.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to head over to the <a href="./#final-steps">final steps</a> section afterwards!</p>
</div>
<p><br></p>
<h4 id="css-injector">CSS Injector<a class="headerlink" href="#css-injector" title="Permanent link">&para;</a></h4>
<p><a href="https://ankiweb.net/shared/info/181103283">(Official page)</a>
Code: <code>181103283</code></p>
<p>I <em>strongly</em> recommend using this, because
if you don't use this, the fields within the Anki field editor
won't have certain stylizations that makes the field actually interpretable.</p>
<p><a href="../assets/css_injector.png"><img alt="CSS Injector comparison" src="../assets/css_injector.png" /></a></p>
<p>There are two ways of using css injector with this note type:</p>
<details class="info">
<summary>Option 1: Automatically updates with the card (recommended)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Windows</label><label for="__tabbed_3_2">MacOS</label><label for="__tabbed_3_3">Linux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>As a preliminary step, you will have to remove the empty <code>field.css</code> and <code>editor.css</code> files
that comes with the add-on.
That can be done through command line (below), or you can simply navigate to the
<code>Anki2/addons21/181103283/user_files</code> folder
(within the <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">addons folder</a>)
and delete both <code>css</code> files.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">:</span><span class="c1">: be sure to change USERNAME to your computer username!</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">del</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\addons21\181103283\user_files\field.css&quot;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">del</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\addons21\181103283\user_files\editor.css&quot;</span>
</code></pre></div>
<p>Afterwards, open command prompt with elevated permissions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to open command prompt, and not PowerShell.
If you've never used command prompt before, see
<a href="https://www.howtogeek.com/194041/how-to-open-the-command-prompt-as-administrator-in-windows-8.1/">this</a>.</p>
</div>
<p>With command prompt opened, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">:</span><span class="c1">: be sure to change USERNAME to your computer username and PROFILENAME to your Anki profile.</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">:</span><span class="c1">: There are **two** USERNAME&#39;s to replace, and **one** PROFILENAME to replace</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="p">:</span><span class="c1">: in the commands below.</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">:</span><span class="c1">: Make sure to replace all the fields!</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="k">mklink</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\addons21\181103283\user_files\field.css&quot;</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\PROFILENAME\collection.media\_field.css&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">mklink</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\addons21\181103283\user_files\editor.css&quot;</span> <span class="s2">&quot;C:\Users\USERNAME\AppData\Roaming\Anki2\PROFILENAME\collection.media\_editor.css&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>As a preliminary step, you will have to remove the empty <code>field.css</code> and <code>editor.css</code> files
that comes with the add-on.
That can be done through command line (below), or you can simply navigate to the
<code>Anki2/addons21/181103283/user_files</code> folder
(within the <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">addons folder</a>)
and delete both <code>css</code> files.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>rm <span class="s2">&quot;~/Library/Application Support/Anki2/addons21/181103283/user_files/field.css&quot;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>rm <span class="s2">&quot;~/Library/Application Support/Anki2/addons21/181103283/user_files/editor.css&quot;</span>
</code></pre></div>
<p>Afterwards, run the following command:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># be sure to change `PROFILENAME` to your Anki profile</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>ln -s <span class="s2">&quot;~/Library/Application Support/Anki2/PROFILENAME/collection.media/_field.css&quot;</span> <span class="s2">&quot;~/Library/Application Support/Anki2/addons21/181103283/user_files/field.css&quot;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>ln -s <span class="s2">&quot;~/Library/Application Support/Anki2/PROFILENAME/collection.media/_editor.css&quot;</span> <span class="s2">&quot;~/Library/Application Support/Anki2/addons21/181103283/user_files/editor.css&quot;</span>
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p>As a preliminary step, you will have to remove the empty <code>field.css</code> and <code>editor.css</code> files
that comes with the add-on.
That can be done through command line (below), or you can simply navigate to the
<code>Anki2/addons21/181103283/user_files</code> folder
(within the <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">addons folder</a>)
and delete both <code>css</code> files.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>rm <span class="s2">&quot;~/.local/share/Anki2/addons21/181103283/user_files/field.css&quot;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>rm <span class="s2">&quot;~/.local/share/Anki2/addons21/181103283/user_files/editor.css&quot;</span>
</code></pre></div>
<p>Afterwards, run the following command:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># be sure to change `PROFILENAME` to your Anki profile</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>ln -s <span class="s2">&quot;~/.local/share/Anki2/PROFILENAME/collection.media/_field.css&quot;</span> <span class="s2">&quot;~/.local/share/Anki2/addons21/181103283/user_files/field.css&quot;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>ln -s <span class="s2">&quot;~/.local/share/Anki2/PROFILENAME/collection.media/_editor.css&quot;</span> <span class="s2">&quot;~/.local/share/Anki2/addons21/181103283/user_files/editor.css&quot;</span>
</code></pre></div></p>
</div>
</div>
</div>
</details>
<details class="info">
<summary>Option 2: Manually without respecting updates</summary>
<ol>
<li>Navigate to css injector <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">addon folder</a>
    (<code>Anki2/addons21/181103283/user_files</code>)</li>
<li>Remove the existing <code>field.css</code> and <code>editor.css</code> files</li>
<li>Copy the <code>_field.css</code> file and <code>_editor.css</code> file
    (found under your profile's <a href="../faq/#where-is-the-x-folder-in-anki" target="_blank">media folder</a>)
    into the css injector add-on directory.</li>
<li>Rename <code>_field.css</code> to <code>field.css</code>.</li>
<li>Rename <code>_editor.css</code> to <code>editor.css</code>.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If either of the two css files ever update,
you will have to manually copy and rename the file again.</p>
</div>
</details>
<p><br></p>
<h4 id="ajt-furigana">AJT Furigana<a class="headerlink" href="#ajt-furigana" title="Permanent link">&para;</a></h4>
<p><a href="https://ankiweb.net/shared/info/1344485230">(Official page)</a>
Code: <code>1344485230</code></p>
<p>Alternative and up-to-date version of JapaneseSupport.
Automatically generates furigana upon Yomichan card creation.</p>
<p>This add-on is optional, because the card will simply show the sentence without
furigana if there is no furigana generated sentence.</p>
<h5 id="config-changes">Config Changes<a class="headerlink" href="#config-changes" title="Permanent link">&para;</a></h5>
<p>The config of the add-on must be changed to work with this note.</p>
<p>To change the config of any Anki add-on, head over to:</p>
<blockquote>
<p><code>Tools</code> →  <code>Add-ons</code> →  (select the add-on) →  <code>Config</code>.</p>
</blockquote>
<details class="examplecode">
<summary>Click here to see the full AJT Furigana config</summary>
<p>The important things to change in the config are:</p>
<ul>
<li><code>generate_on_note_add</code></li>
<li><code>fields</code></li>
<li><code>note_types</code></li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="nt">&quot;context_menu&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">        </span><span class="nt">&quot;generate_furigana&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">        </span><span class="nt">&quot;generate_furigana_no_kanji&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">        </span><span class="nt">&quot;to_hiragana&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">        </span><span class="nt">&quot;to_katakana&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="p">},</span><span class="w"></span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// (1)!</span><span class="w"></span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">        </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SentenceReading&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sentence&quot;</span><span class="w"></span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="nt">&quot;furigana_suffix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot; (furigana)&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="nt">&quot;generate_on_note_add&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// (2)!</span><span class="w"></span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">    </span><span class="nt">&quot;note_types&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// (3)!</span><span class="w"></span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">        </span><span class="s2">&quot;jp&quot;</span><span class="w"></span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">    </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">    </span><span class="nt">&quot;skip_numbers&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">    </span><span class="nt">&quot;skip_words&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">    </span><span class="nt">&quot;toolbar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">        </span><span class="nt">&quot;clean_furigana_button&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">            </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">            </span><span class="nt">&quot;shortcut&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alt+u&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">            </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;削&quot;</span><span class="w"></span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">        </span><span class="p">},</span><span class="w"></span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">        </span><span class="nt">&quot;furigana_button&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">            </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">            </span><span class="nt">&quot;shortcut&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alt+o&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">            </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;振&quot;</span><span class="w"></span>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>
<p>We change the field names to match this note type.</p>
</li>
<li>
<p>This ensures that the pitch accent is added upon initial note creation.
    Note that this is technically optional.
    If you are likely to change the sentence after adding the note,
    then it is possible to leave this as <code>false</code>,
    and bulk add the furigana later.</p>
</li>
<li>
<p>Similarly to the <code>fields</code> change, we change this to properly detect this note type.</p>
</li>
</ol>
</details>
<h5 id="additional-info">Additional Info<a class="headerlink" href="#additional-info" title="Permanent link">&para;</a></h5>
<p>Furigana generation is occasionally incorrect,
so if you plan on using furigana regularly, you should double-check the readings
to make sure they are correct.</p>
<details class="info">
<summary>JapaneseSupport v.s. AJT Furigana</summary>
<p>If you use <code>JapaneseSupport</code>, bolded words and other styles within a field
are not transferred over from the original field to the reading field.
Additionally, <code>JapaneseSupport</code> does not have an option to automatically add
the reading upon card creation.
<code>AJT Furigana</code> supports both of those of those features.</p>
</details>
<p><br></p>
<h4 id="ajt-pitch-accent">AJT Pitch Accent<a class="headerlink" href="#ajt-pitch-accent" title="Permanent link">&para;</a></h4>
<p><a href="https://ankiweb.net/shared/info/1225470483">(Official page)</a>
Code: <code>1225470483</code></p>
<p>Automatically adds pitch accent info given the word.</p>
<p>For the purposes of the card,
the only purpose that this add-on serves is the following:</p>
<ul>
<li>Adds devoiced and nasal information to the existing reading.</li>
<li>If your Yomichan pitch accent dictionaries did not contain any pitch accent info for the word
  but the add-on does, then it will use the add-on data.</li>
</ul>
<h5 id="config-changes_1">Config Changes<a class="headerlink" href="#config-changes_1" title="Permanent link">&para;</a></h5>
<p>Like with AJT Furigana, the config of the add-on must be changed to work with this note.</p>
<details class="examplecode">
<summary>Click here to see the full AJT Pitch Accent config</summary>
<p>The important things to change in the config are:</p>
<ul>
<li><code>generate_on_note_add</code></li>
<li><code>destination_fields</code></li>
<li><code>source_fields</code></li>
<li><code>note_types</code></li>
<li><code>styles</code></li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="nt">&quot;destination_fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">        </span><span class="s2">&quot;AJTWordPitch&quot;</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nt">&quot;generate_on_note_add&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// (1)!</span><span class="w"></span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="nt">&quot;kana_lookups&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="nt">&quot;lookup_shortcut&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ctrl+8&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nt">&quot;note_types&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">        </span><span class="s2">&quot;jp&quot;</span><span class="w"></span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="nt">&quot;regenerate_readings&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="nt">&quot;skip_words&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;へ,か,よ,ん,だ,び,の,や,ね,ば,て,と,た,が,に,な,は,も,ます,から,いる,たち,てる,う,ましょ,たい,です&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">    </span><span class="nt">&quot;source_fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">        </span><span class="s2">&quot;Word&quot;</span><span class="w"></span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">    </span><span class="nt">&quot;styles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (2)!</span><span class="w"></span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">        </span><span class="nt">&quot;&amp;#42780;&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;span class=\&quot;downstep\&quot;&gt;&lt;span class=\&quot;downstep-inner\&quot;&gt;&amp;#42780;&lt;/span&gt;&lt;/span&gt;&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">        </span><span class="nt">&quot;class=\&quot;overline\&quot;&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;style=\&quot;text-decoration:overline;\&quot; class=\&quot;pitchoverline\&quot;&quot;</span><span class="w"></span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">    </span><span class="p">},</span><span class="w"></span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">    </span><span class="nt">&quot;use_hiragana&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">    </span><span class="nt">&quot;use_mecab&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>
<p>We change <code>generate_on_note_add</code> and <code>note_types</code> for the exact same reasons as the
    AJT Furigana Config section.
    The <code>destination_fields</code> and <code>source_fields</code> options are changed similarily to the
    <code>fields</code> option in the AJT Furigana Config section.</p>
</li>
<li>
<p><code>styles</code> adds custom stylization that creates the pitch accent lines and downsteps as you see
    in the example note.
    Without this, the default styles will look like the word
    you see in the official add-on page.</p>
</li>
</ol>
</details>
<p><br></p>
<h3 id="final-steps">Final Steps<a class="headerlink" href="#final-steps" title="Permanent link">&para;</a></h3>
<p>After the above setup, <strong>make sure to restart Anki</strong> for the add-ons and config changes to take effect.
If the css injector add-on is installed correctly, your Anki field editor should now have color!</p>
<p>Additionally, now that Anki-Connect is installed, kanji hover should also be functioning.
Hover over a kanji within the word reading to make sure that a popup appears.
In particular, the 者 kanji in the example 偽者 and 不審者 cards should point to each other.</p>
<hr />
<h2 id="transfer-existing-notes">Transfer Existing Notes<a class="headerlink" href="#transfer-existing-notes" title="Permanent link">&para;</a></h2>
<p>If you wish to transfer existing cards into this note type,
please see <a href="../importing/" target="_blank">this page</a>.</p>
<hr />
<h2 id="updating-the-note">Updating the Note<a class="headerlink" href="#updating-the-note" title="Permanent link">&para;</a></h2>
<p>If you wish to update the note, follow the steps in <a href="../updating/" target="_blank">this page</a>.</p>
<p>Be assured that this note doesn't auto-update,
and you have to manually update the note if you want it to update.</p>
<hr />
<h2 id="yomichan-setup">Yomichan Setup<a class="headerlink" href="#yomichan-setup" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/FooSoft/yomichan">Yomichan</a>
is the main program that will create the cards. You can download Yomichan as a Firefox extension
or under the Chrome web store.</p>
<p>This section will go over the minimal Yomichan setup to work with this card type.</p>
<p><strong>If you have never used Yomichan before</strong>, please see
<a href="https://learnjapanese.moe/yomichan/">this page</a> first to get it working.</p>
<h3 id="preliminary-steps">Preliminary Steps<a class="headerlink" href="#preliminary-steps" title="Permanent link">&para;</a></h3>
<p>If you have used Yomichan before, please make a
<a href="../faq/#how-do-i-backup-yomichan-settings" target="_blank">backup of your settings</a>
(just in case).</p>
<h3 id="yomichan-fields">Yomichan Fields<a class="headerlink" href="#yomichan-fields" title="Permanent link">&para;</a></h3>
<p>To edit the fields that Yomichan will automatically fill out, do the following:</p>
<p><div class="video-container"><video style="width: 100%; height: 100%" controls  ><source src="../assets/yomichan/yomichan_anki_format.mp4" type="video/mp4" /></video></div></p>
<ol>
<li>Navigate to Yomichan Settings.</li>
<li>Go to the <code>Anki</code> section.</li>
<li>Select <code>Anki card format...</code>.</li>
<li>Set "Model" as <code>JP Mining Note</code>.</li>
<li>Copy and paste the following values into the fields
   (the custom markers won't be available in the dropdown arrow):</li>
</ol>
<details class="example">
<summary>Click here to see the fields to copy and paste.</summary>
<table>
<thead>
<tr>
<th>Anki Fields</th>
<th>Yomichan Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="smaller-table-row">Key</td>
<td class="smaller-table-row"><code>{expression}</code></td>
</tr>
<tr>
<td class="smaller-table-row">Word</td>
<td class="smaller-table-row"><code>{expression}</code></td>
</tr>
<tr>
<td class="smaller-table-row">WordReading</td>
<td class="smaller-table-row"><code>{furigana-plain}</code></td>
</tr>
<tr>
<td class="smaller-table-row">PAOverride</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">AJTWordPitch</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">PrimaryDefinition</td>
<td class="smaller-table-row"><code>{jpmn-primary-definition}</code></td>
</tr>
<tr>
<td class="smaller-table-row">Sentence</td>
<td class="smaller-table-row"><code>{cloze-prefix}&lt;b&gt;{cloze-body}&lt;/b&gt;{cloze-suffix}</code></td>
</tr>
<tr>
<td class="smaller-table-row">SentenceReading</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">AltDisplay</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">AltDisplayPASentenceCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">AdditionalNotes</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*IsSentenceCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*IsClickCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*IsHoverCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*IsTargetedSentenceCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*PAShowInfo</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*PATestOnlyWord</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*PADoNotTest</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*PASeparateWordCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*PASeparateSentenceCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">*SeparateClozeDeletionCard</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">Hint</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">HintNotHidden</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">Picture</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">WordAudio</td>
<td class="smaller-table-row"><code>{audio}</code></td>
</tr>
<tr>
<td class="smaller-table-row">SentenceAudio</td>
<td></td>
</tr>
<tr>
<td class="smaller-table-row">PAGraphs</td>
<td class="smaller-table-row"><code>{jpmn-pitch-accent-graphs}</code></td>
</tr>
<tr>
<td class="smaller-table-row">PAPositions</td>
<td class="smaller-table-row"><code>{jpmn-pitch-accent-positions}</code></td>
</tr>
<tr>
<td class="smaller-table-row">PASilence</td>
<td class="smaller-table-row"><code>[sound:_silence.wav]</code></td>
</tr>
<tr>
<td class="smaller-table-row">FrequenciesStylized</td>
<td class="smaller-table-row"><code>{jpmn-frequencies}</code></td>
</tr>
<tr>
<td class="smaller-table-row">FrequencySort</td>
<td class="smaller-table-row"><code>{jpmn-min-freq}</code></td>
</tr>
<tr>
<td class="smaller-table-row">SecondaryDefinition</td>
<td class="smaller-table-row"><code>{jpmn-secondary-definition}</code></td>
</tr>
<tr>
<td class="smaller-table-row">ExtraDefinitions</td>
<td class="smaller-table-row"><code>{jpmn-extra-definitions}</code></td>
</tr>
<tr>
<td class="smaller-table-row">UtilityDictionaries</td>
<td class="smaller-table-row"><code>{jpmn-utility-dictionaries}</code></td>
</tr>
<tr>
<td class="smaller-table-row">Comment</td>
<td></td>
</tr>
</tbody>
</table>
</details>
<p>The above fields will create, by default,
a basic <strong>vocab card</strong> in <strong>bilingual format</strong>,
with all other definitions in collapsable fields.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Anything field marked with <code>*</code> are binary fields, and
<strong>should be configured to each user's personal preferences.</strong>
To change the default value of any of the fields, simply fill
the field in within the aforementioned <code>Anki card format...</code> section.</p>
</div>
<p>The custom markers like <code>{jpmn-primary-definition}</code> is not provided by Yomichan by default.
See the section below to make these markers usable.</p>
<p><br></p>
<h3 id="yomichan-templates">Yomichan Templates<a class="headerlink" href="#yomichan-templates" title="Permanent link">&para;</a></h3>
<p>Yomichan supports user inserted template code that allows the automatic
separation of bilingual and monolingual dictionary definitions, custom stylization, etc.
This note type makes heavy use of these custom templates.</p>
<p>To make the new markers usable, do the following:</p>
<p><div class="video-container"><video style="width: 100%; height: 100%" controls  ><source src="../assets/yomichan/import_yomichan_templates.mp4" type="video/mp4" /></video></div></p>
<ol>
<li>Navigate to Yomichan Settings.</li>
<li>Make sure that advanced settings are turned on (bottom left corner).</li>
<li>Go to the <code>Anki</code> section</li>
<li>Select <code>Configure Anki card templates...</code></li>
<li>If you have existing template code already, I highly recommend
   <strong>resetting the templates</strong> (bottom right corner, red button)
   unless you know exactly what you are doing.</li>
</ol>
<p>After resetting the templates,
<strong>without</strong> removing any of the existing template code,
add the following template code as follows:</p>
<ol>
<li>
<p>Copy and paste the code below to the <strong>top</strong> of the default Yomichan template code:</p>
<details class="examplecode">
<summary>Click here to show the template code to copy.</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">NOTE</span><span class="err">:</span> <span class="nv">this</span> <span class="nv">MUST</span> <span class="nv">be</span> <span class="nv">put</span> <span class="nv">at</span> <span class="nv">the</span> <span class="nv">very</span> <span class="nv">top</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">templates</span> <span class="nv">section</span><span class="err">!</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">REGEX</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">matches</span> <span class="nv">most</span> <span class="nv">JMdict</span> <span class="nv">dictionaries</span> <span class="nv">and</span> <span class="err">新和英</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;bilingual-dict-regex&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"> ^(([Jj][Mm][Dd]ict)(?! Surface Forms)(.*)|新和英.*|日本語文法辞典.*|ADD_BILINGUAL_DICTIONARIES_HERE)$ </span><span class="cp">{{</span><span class="m m-Attribute">~/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;utility-dict-regex&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"> ^(NHK.*|シン・漢字遣い参考|JMDict Surface Forms|ADD_UTILITY_DICTIONARIES_HERE)$ </span><span class="cp">{{</span><span class="m m-Attribute">~/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;ignored-dict-regex&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"> ^(ADD_IGNORED_DICTIONARIES_HERE)$ </span><span class="cp">{{</span><span class="m m-Attribute">~/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">OPTIONS</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">valid</span> <span class="nv">values</span><span class="err">:</span> <span class="s2">&quot;bilingual&quot;</span><span class="err">,</span> <span class="s2">&quot;monolingual&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;opt-first-definition-type&quot;</span> <span class="s2">&quot;bilingual&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">options</span> <span class="nv">related</span> <span class="nv">to</span> <span class="nv">selected</span> <span class="nv">text</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="cp">{{</span><span class="nv">set</span> <span class="s2">&quot;opt-selection-text-enabled&quot;</span>               <span class="nv">false</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="cp">{{</span><span class="nv">set</span> <span class="s2">&quot;opt-selection-text-dictionary&quot;</span>            <span class="nv">true</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="cp">{{</span><span class="nv">set</span> <span class="s2">&quot;opt-selection-text-glossary&quot;</span>              <span class="nv">true</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="cp">{{</span><span class="nv">set</span> <span class="s2">&quot;opt-selection-text-glossary-attempt-bold&quot;</span> <span class="nv">true</span><span class="cp">}}</span><span class="x"></span>
</code></pre></div>
</details>
</li>
<li>
<p>Copy and paste the code below to the <strong>bottom</strong> of the default Yomichan template code:</p>
<details class="examplecode">
<summary>Click here to show the template code to copy.</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">NOTE</span><span class="err">:</span> <span class="nv">this</span> <span class="nv">should</span> <span class="nv">be</span> <span class="nv">put</span> <span class="nv">at</span> <span class="nv">the</span> <span class="nv">very</span> <span class="nv">bottom</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">templates</span> <span class="nv">section</span><span class="err">!</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="na">=================</span><span class="o">=</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>     <span class="nv">helper</span> <span class="nv">functions</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="na">=================</span><span class="o">=</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="cp">{{</span><span class="m m-Attribute">#*inline</span> <span class="s2">&quot;s&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">/inline</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">categorizes</span> <span class="nv">into</span> <span class="m">4</span> <span class="nv">types</span><span class="err">:</span> <span class="s2">&quot;ignored&quot;</span><span class="err">,</span> <span class="s2">&quot;bilingual&quot;</span><span class="err">,</span> <span class="s2">&quot;utility&quot;</span><span class="err">,</span> <span class="nv">or</span> <span class="s2">&quot;monolingual&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-get-dict-type&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;rx-match-ignored&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#regexMatch</span> <span class="nv">(get</span> <span class="s2">&quot;ignored-dict-regex&quot;</span><span class="nv">)</span> <span class="s2">&quot;gu&quot;</span><span class="m">~</span><span class="cp">}}{{</span><span class="nv">dictionaryName</span><span class="cp">}}{{</span><span class="m m-Attribute">~/regexMatch~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;rx-match-bilingual&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#regexMatch</span> <span class="nv">(get</span> <span class="s2">&quot;bilingual-dict-regex&quot;</span><span class="nv">)</span> <span class="s2">&quot;gu&quot;</span><span class="m">~</span><span class="cp">}}{{</span><span class="nv">dictionaryName</span><span class="cp">}}{{</span><span class="m m-Attribute">~/regexMatch~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;rx-match-utility&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#regexMatch</span> <span class="nv">(get</span> <span class="s2">&quot;utility-dict-regex&quot;</span><span class="nv">)</span> <span class="s2">&quot;gu&quot;</span><span class="m">~</span><span class="cp">}}{{</span><span class="nv">dictionaryName</span><span class="cp">}}{{</span><span class="m m-Attribute">~/regexMatch~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="na">&quot;!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">rx-match-ignored</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="s2">            ignored</span>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="s2">        {{~else if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">rx-match-bilingual</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="s2">            bilingual</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="s2">        {{~else if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">rx-match-utility</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="s2">            utility</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="s2">            {{~! assumed that anything else is a monolingual dictionary ~}}</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="s2">            monolingual</span>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a><span class="s2">{{~! returns &quot;&quot; if selection text is disabled, or if none existed in the first place ~}}</span>
<a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-selection-text</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a><span class="s2">    {{~! text-mode != &quot;&quot; and text-mode &gt; 0 ~}}</span>
<a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a><span class="s2">    {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-enabled</span><span class="s2">&quot;) true)~}}</span>
<a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a><span class="s2">        {{~! removes leading and trailing whitespace ~}}</span>
<a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a><span class="s2">        {{~#regexReplace &quot;</span><span class="err">^\</span><span class="nv">s</span><span class="err">+|\</span><span class="nv">s</span><span class="err">+$</span><span class="s2">&quot; &quot;&quot; &quot;</span><span class="nv">g</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a><span class="s2">            {{~#getMedia &quot;</span><span class="nv">selectionText</span><span class="s2">&quot;}}{{/getMedia~}}</span>
<a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a><span class="s2">        {{~/regexReplace~}}</span>
<a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a><span class="s2">    {{~/if~}}</span>
<a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a>
<a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a><span class="s2">{{~! checks that the selection text is indeed a dictionary (returns the text if true, nothing if false) ~}}</span>
<a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-check-dictionary</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a><span class="s2">        {{~#set &quot;</span><span class="nv">selection-is-dictionary</span><span class="s2">&quot; false}}{{/set~}}</span>
<a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a>
<a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a><span class="s2">        {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a><span class="s2">            {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">selection</span><span class="s2">&quot;) dictionary)~}}</span>
<a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a><span class="s2">                {{~#set &quot;</span><span class="nv">selection-is-dictionary</span><span class="s2">&quot; true ~}}{{~/set~}}</span>
<a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a>
<a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">selection-is-dictionary</span><span class="s2">&quot;) true)~}}</span>
<a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a><span class="s2">            {{~get &quot;</span><span class="nv">selection</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a><span class="s2">            {{~! null ~}}</span>
<a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a>
<a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a>
<a id="__codelineno-12-74" name="__codelineno-12-74" href="#__codelineno-12-74"></a>
<a id="__codelineno-12-75" name="__codelineno-12-75" href="#__codelineno-12-75"></a><span class="s2">{{~! gives the raw glossary as the search string (for searching to see if the selected text</span>
<a id="__codelineno-12-76" name="__codelineno-12-76" href="#__codelineno-12-76"></a><span class="s2">is a part of a dictionary) ~}}</span>
<a id="__codelineno-12-77" name="__codelineno-12-77" href="#__codelineno-12-77"></a><span class="s2">{{#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-glossary-single-search</span><span class="s2">&quot;}}</span>
<a id="__codelineno-12-78" name="__codelineno-12-78" href="#__codelineno-12-78"></a>
<a id="__codelineno-12-79" name="__codelineno-12-79" href="#__codelineno-12-79"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-80" name="__codelineno-12-80" href="#__codelineno-12-80"></a><span class="s2">        {{~#each glossary}}{{#formatGlossary ../dictionary}}{{{.}}}{{/formatGlossary}}{{#unless @last}} | {{/unless}}{{/each~}}</span>
<a id="__codelineno-12-81" name="__codelineno-12-81" href="#__codelineno-12-81"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-82" name="__codelineno-12-82" href="#__codelineno-12-82"></a>
<a id="__codelineno-12-83" name="__codelineno-12-83" href="#__codelineno-12-83"></a><span class="s2">{{/inline}}</span>
<a id="__codelineno-12-84" name="__codelineno-12-84" href="#__codelineno-12-84"></a>
<a id="__codelineno-12-85" name="__codelineno-12-85" href="#__codelineno-12-85"></a>
<a id="__codelineno-12-86" name="__codelineno-12-86" href="#__codelineno-12-86"></a>
<a id="__codelineno-12-87" name="__codelineno-12-87" href="#__codelineno-12-87"></a><span class="s2">{{~! escape a regex string: https://stackoverflow.com/a/6969486~}}</span>
<a id="__codelineno-12-88" name="__codelineno-12-88" href="#__codelineno-12-88"></a><span class="s2">{{~! /[.*+?^${}()|[\]\\]/g, &#39;\\$&amp;&#39; ~}}</span>
<a id="__codelineno-12-89" name="__codelineno-12-89" href="#__codelineno-12-89"></a><span class="s2">{{~! escapes the `regexString` regex to allow it to be used like a normal search in a string ~}}</span>
<a id="__codelineno-12-90" name="__codelineno-12-90" href="#__codelineno-12-90"></a><span class="s2">{{#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-escape-regex</span><span class="s2">&quot;}}</span>
<a id="__codelineno-12-91" name="__codelineno-12-91" href="#__codelineno-12-91"></a><span class="s2">    {{~#regexReplace &quot;</span><span class="err">[.*+?^${}</span><span class="nv">()</span><span class="err">|[\]\\]</span><span class="s2">&quot; &quot;</span><span class="err">\$&amp;</span><span class="s2">&quot; &quot;</span><span class="nv">g</span><span class="s2">&quot;~}}{{~regexString~}}{{~/regexReplace~}}</span>
<a id="__codelineno-12-92" name="__codelineno-12-92" href="#__codelineno-12-92"></a><span class="s2">{{/inline}}</span>
<a id="__codelineno-12-93" name="__codelineno-12-93" href="#__codelineno-12-93"></a>
<a id="__codelineno-12-94" name="__codelineno-12-94" href="#__codelineno-12-94"></a>
<a id="__codelineno-12-95" name="__codelineno-12-95" href="#__codelineno-12-95"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-get-dict-if-glossary-selected</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-96" name="__codelineno-12-96" href="#__codelineno-12-96"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-97" name="__codelineno-12-97" href="#__codelineno-12-97"></a><span class="s2">        {{~#set &quot;</span><span class="nv">result-dictionary</span><span class="s2">&quot; null}}{{/set~}}</span>
<a id="__codelineno-12-98" name="__codelineno-12-98" href="#__codelineno-12-98"></a><span class="s2">        {{~#set &quot;</span><span class="nv">search-selection</span><span class="s2">&quot;}}{{~&gt; _jpmn-escape-regex regexString=(get &quot;</span><span class="nv">selection</span><span class="s2">&quot;) ~}}{{/set~}}</span>
<a id="__codelineno-12-99" name="__codelineno-12-99" href="#__codelineno-12-99"></a>
<a id="__codelineno-12-100" name="__codelineno-12-100" href="#__codelineno-12-100"></a><span class="s2">        {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-101" name="__codelineno-12-101" href="#__codelineno-12-101"></a><span class="s2">            {{~#set &quot;</span><span class="nv">search-def</span><span class="s2">&quot;}}{{~&gt; _jpmn-glossary-single-search . brief=../brief noDictionaryTag=../noDictionaryTag ~}}{{/set~}}</span>
<a id="__codelineno-12-102" name="__codelineno-12-102" href="#__codelineno-12-102"></a>
<a id="__codelineno-12-103" name="__codelineno-12-103" href="#__codelineno-12-103"></a><span class="s2">            {{~set &quot;</span><span class="nv">search-regex-match</span><span class="s2">&quot; (regexMatch (get &quot;</span><span class="nv">search-selection</span><span class="s2">&quot;) &quot;</span><span class="nv">gu</span><span class="s2">&quot; (get &quot;</span><span class="nv">search-def</span><span class="s2">&quot;))}}</span>
<a id="__codelineno-12-104" name="__codelineno-12-104" href="#__codelineno-12-104"></a><span class="s2">            {{~#if (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot;</span>
<a id="__codelineno-12-105" name="__codelineno-12-105" href="#__codelineno-12-105"></a><span class="s2">                (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">result-dictionary</span><span class="s2">&quot;) null)</span>
<a id="__codelineno-12-106" name="__codelineno-12-106" href="#__codelineno-12-106"></a><span class="s2">                (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">search-regex-match</span><span class="s2">&quot;) &quot;&quot;)</span>
<a id="__codelineno-12-107" name="__codelineno-12-107" href="#__codelineno-12-107"></a><span class="s2">            )~}}</span>
<a id="__codelineno-12-108" name="__codelineno-12-108" href="#__codelineno-12-108"></a><span class="s2">                {{~#set &quot;</span><span class="nv">result-dictionary</span><span class="s2">&quot; dictionary}}{{/set~}}</span>
<a id="__codelineno-12-109" name="__codelineno-12-109" href="#__codelineno-12-109"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-110" name="__codelineno-12-110" href="#__codelineno-12-110"></a>
<a id="__codelineno-12-111" name="__codelineno-12-111" href="#__codelineno-12-111"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-112" name="__codelineno-12-112" href="#__codelineno-12-112"></a><span class="s2">        {{~get &quot;</span><span class="nv">result-dictionary</span><span class="s2">&quot; ~}}</span>
<a id="__codelineno-12-113" name="__codelineno-12-113" href="#__codelineno-12-113"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-114" name="__codelineno-12-114" href="#__codelineno-12-114"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-115" name="__codelineno-12-115" href="#__codelineno-12-115"></a>
<a id="__codelineno-12-116" name="__codelineno-12-116" href="#__codelineno-12-116"></a>
<a id="__codelineno-12-117" name="__codelineno-12-117" href="#__codelineno-12-117"></a>
<a id="__codelineno-12-118" name="__codelineno-12-118" href="#__codelineno-12-118"></a>
<a id="__codelineno-12-119" name="__codelineno-12-119" href="#__codelineno-12-119"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-120" name="__codelineno-12-120" href="#__codelineno-12-120"></a><span class="s2">    searches dictionary, determined by `opt-first-definition-type`</span>
<a id="__codelineno-12-121" name="__codelineno-12-121" href="#__codelineno-12-121"></a><span class="s2">    - (opt-first-definition-type === bilingual) -&gt; bilingual dictionaries are searched first</span>
<a id="__codelineno-12-122" name="__codelineno-12-122" href="#__codelineno-12-122"></a><span class="s2">    - (opt-first-definition-type === monolingual) -&gt; monolingual dictionaries are searched first</span>
<a id="__codelineno-12-123" name="__codelineno-12-123" href="#__codelineno-12-123"></a><span class="s2">~}}</span>
<a id="__codelineno-12-124" name="__codelineno-12-124" href="#__codelineno-12-124"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-search-primary-definition-dict</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-125" name="__codelineno-12-125" href="#__codelineno-12-125"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-126" name="__codelineno-12-126" href="#__codelineno-12-126"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-first-definition-type</span><span class="s2">&quot;) &quot;</span><span class="nv">bilingual</span><span class="s2">&quot;)~}}</span>
<a id="__codelineno-12-127" name="__codelineno-12-127" href="#__codelineno-12-127"></a><span class="s2">            {{~#set &quot;</span><span class="nv">first-definition-search-type-1</span><span class="s2">&quot; &quot;</span><span class="nv">bilingual</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-128" name="__codelineno-12-128" href="#__codelineno-12-128"></a><span class="s2">            {{~#set &quot;</span><span class="nv">first-definition-search-type-2</span><span class="s2">&quot; &quot;</span><span class="nv">monolingual</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-129" name="__codelineno-12-129" href="#__codelineno-12-129"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-130" name="__codelineno-12-130" href="#__codelineno-12-130"></a><span class="s2">            {{~#set &quot;</span><span class="nv">first-definition-search-type-1</span><span class="s2">&quot; &quot;</span><span class="nv">monolingual</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-131" name="__codelineno-12-131" href="#__codelineno-12-131"></a><span class="s2">            {{~#set &quot;</span><span class="nv">first-definition-search-type-2</span><span class="s2">&quot; &quot;</span><span class="nv">bilingual</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-132" name="__codelineno-12-132" href="#__codelineno-12-132"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-133" name="__codelineno-12-133" href="#__codelineno-12-133"></a>
<a id="__codelineno-12-134" name="__codelineno-12-134" href="#__codelineno-12-134"></a>
<a id="__codelineno-12-135" name="__codelineno-12-135" href="#__codelineno-12-135"></a><span class="s2">        {{~! first-dictionary === null &lt;=&gt; no valid dictionary was found ~}}</span>
<a id="__codelineno-12-136" name="__codelineno-12-136" href="#__codelineno-12-136"></a><span class="s2">        {{~#set &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot; null}}{{/set~}}</span>
<a id="__codelineno-12-137" name="__codelineno-12-137" href="#__codelineno-12-137"></a>
<a id="__codelineno-12-138" name="__codelineno-12-138" href="#__codelineno-12-138"></a><span class="s2">        {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-139" name="__codelineno-12-139" href="#__codelineno-12-139"></a>
<a id="__codelineno-12-140" name="__codelineno-12-140" href="#__codelineno-12-140"></a><span class="s2">            {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-141" name="__codelineno-12-141" href="#__codelineno-12-141"></a><span class="s2">            {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) (get &quot;</span><span class="nv">first-definition-search-type-1</span><span class="s2">&quot;))~}}</span>
<a id="__codelineno-12-142" name="__codelineno-12-142" href="#__codelineno-12-142"></a><span class="s2">                {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; null (get &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot;))~}}</span>
<a id="__codelineno-12-143" name="__codelineno-12-143" href="#__codelineno-12-143"></a><span class="s2">                    {{~#set &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot; dictionary~}}{{~/set~}}</span>
<a id="__codelineno-12-144" name="__codelineno-12-144" href="#__codelineno-12-144"></a><span class="s2">                {{~/if~}}</span>
<a id="__codelineno-12-145" name="__codelineno-12-145" href="#__codelineno-12-145"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-146" name="__codelineno-12-146" href="#__codelineno-12-146"></a>
<a id="__codelineno-12-147" name="__codelineno-12-147" href="#__codelineno-12-147"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-148" name="__codelineno-12-148" href="#__codelineno-12-148"></a>
<a id="__codelineno-12-149" name="__codelineno-12-149" href="#__codelineno-12-149"></a>
<a id="__codelineno-12-150" name="__codelineno-12-150" href="#__codelineno-12-150"></a><span class="s2">        {{~! uses other dictionary type, last resort ~}}</span>
<a id="__codelineno-12-151" name="__codelineno-12-151" href="#__codelineno-12-151"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot;) null)~}}</span>
<a id="__codelineno-12-152" name="__codelineno-12-152" href="#__codelineno-12-152"></a>
<a id="__codelineno-12-153" name="__codelineno-12-153" href="#__codelineno-12-153"></a><span class="s2">            {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-154" name="__codelineno-12-154" href="#__codelineno-12-154"></a>
<a id="__codelineno-12-155" name="__codelineno-12-155" href="#__codelineno-12-155"></a><span class="s2">                {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-156" name="__codelineno-12-156" href="#__codelineno-12-156"></a><span class="s2">                {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) (get &quot;</span><span class="nv">first-definition-search-type-2</span><span class="s2">&quot;))~}}</span>
<a id="__codelineno-12-157" name="__codelineno-12-157" href="#__codelineno-12-157"></a><span class="s2">                    {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; null (get &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot;))~}}</span>
<a id="__codelineno-12-158" name="__codelineno-12-158" href="#__codelineno-12-158"></a><span class="s2">                        {{~#set &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot; dictionary~}}{{~/set~}}</span>
<a id="__codelineno-12-159" name="__codelineno-12-159" href="#__codelineno-12-159"></a><span class="s2">                    {{~/if~}}</span>
<a id="__codelineno-12-160" name="__codelineno-12-160" href="#__codelineno-12-160"></a><span class="s2">                {{~/if~}}</span>
<a id="__codelineno-12-161" name="__codelineno-12-161" href="#__codelineno-12-161"></a>
<a id="__codelineno-12-162" name="__codelineno-12-162" href="#__codelineno-12-162"></a><span class="s2">            {{~/each~}}</span>
<a id="__codelineno-12-163" name="__codelineno-12-163" href="#__codelineno-12-163"></a>
<a id="__codelineno-12-164" name="__codelineno-12-164" href="#__codelineno-12-164"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-165" name="__codelineno-12-165" href="#__codelineno-12-165"></a>
<a id="__codelineno-12-166" name="__codelineno-12-166" href="#__codelineno-12-166"></a><span class="s2">        {{~#get &quot;</span><span class="nv">first-dictionary</span><span class="s2">&quot;~}}{{~/get~}}</span>
<a id="__codelineno-12-167" name="__codelineno-12-167" href="#__codelineno-12-167"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-168" name="__codelineno-12-168" href="#__codelineno-12-168"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-169" name="__codelineno-12-169" href="#__codelineno-12-169"></a>
<a id="__codelineno-12-170" name="__codelineno-12-170" href="#__codelineno-12-170"></a>
<a id="__codelineno-12-171" name="__codelineno-12-171" href="#__codelineno-12-171"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-172" name="__codelineno-12-172" href="#__codelineno-12-172"></a><span class="s2">    if (selection-text exists):</span>
<a id="__codelineno-12-173" name="__codelineno-12-173" href="#__codelineno-12-173"></a><span class="s2">        if (selection-text is exactly a dictionary):</span>
<a id="__codelineno-12-174" name="__codelineno-12-174" href="#__codelineno-12-174"></a><span class="s2">            return dictionary</span>
<a id="__codelineno-12-175" name="__codelineno-12-175" href="#__codelineno-12-175"></a><span class="s2">        if (able to detect dictionary of which the selection-text is highlighting):</span>
<a id="__codelineno-12-176" name="__codelineno-12-176" href="#__codelineno-12-176"></a><span class="s2">            return dictionary</span>
<a id="__codelineno-12-177" name="__codelineno-12-177" href="#__codelineno-12-177"></a><span class="s2">        return null</span>
<a id="__codelineno-12-178" name="__codelineno-12-178" href="#__codelineno-12-178"></a><span class="s2">~}}</span>
<a id="__codelineno-12-179" name="__codelineno-12-179" href="#__codelineno-12-179"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-check-dictionary-and-glossary</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-180" name="__codelineno-12-180" href="#__codelineno-12-180"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-181" name="__codelineno-12-181" href="#__codelineno-12-181"></a>
<a id="__codelineno-12-182" name="__codelineno-12-182" href="#__codelineno-12-182"></a><span class="s2">        {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot; &quot;&quot;}}{{/set~}}</span>
<a id="__codelineno-12-183" name="__codelineno-12-183" href="#__codelineno-12-183"></a>
<a id="__codelineno-12-184" name="__codelineno-12-184" href="#__codelineno-12-184"></a><span class="s2">        {{~! checks if the selected text matches a dictionary ~}}</span>
<a id="__codelineno-12-185" name="__codelineno-12-185" href="#__codelineno-12-185"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-dictionary</span><span class="s2">&quot;) true)~}}</span>
<a id="__codelineno-12-186" name="__codelineno-12-186" href="#__codelineno-12-186"></a><span class="s2">            {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-check-dictionary . ~}}{{/set~}}</span>
<a id="__codelineno-12-187" name="__codelineno-12-187" href="#__codelineno-12-187"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-188" name="__codelineno-12-188" href="#__codelineno-12-188"></a>
<a id="__codelineno-12-189" name="__codelineno-12-189" href="#__codelineno-12-189"></a><span class="s2">        {{~! checks if the selected text matches a definition in a dictionary ~}}</span>
<a id="__codelineno-12-190" name="__codelineno-12-190" href="#__codelineno-12-190"></a><span class="s2">        {{~#if</span>
<a id="__codelineno-12-191" name="__codelineno-12-191" href="#__codelineno-12-191"></a><span class="s2">            (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot; (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">result</span><span class="s2">&quot;) &quot;&quot;)</span>
<a id="__codelineno-12-192" name="__codelineno-12-192" href="#__codelineno-12-192"></a><span class="s2">                (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot;</span>
<a id="__codelineno-12-193" name="__codelineno-12-193" href="#__codelineno-12-193"></a><span class="s2">                    (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-glossary</span><span class="s2">&quot;) true)</span>
<a id="__codelineno-12-194" name="__codelineno-12-194" href="#__codelineno-12-194"></a><span class="s2">                    (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-glossary-attempt-bold</span><span class="s2">&quot;) true)</span>
<a id="__codelineno-12-195" name="__codelineno-12-195" href="#__codelineno-12-195"></a><span class="s2">                )</span>
<a id="__codelineno-12-196" name="__codelineno-12-196" href="#__codelineno-12-196"></a><span class="s2">            )</span>
<a id="__codelineno-12-197" name="__codelineno-12-197" href="#__codelineno-12-197"></a><span class="s2">        ~}}</span>
<a id="__codelineno-12-198" name="__codelineno-12-198" href="#__codelineno-12-198"></a><span class="s2">            {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-get-dict-if-glossary-selected . ~}}{{/set~}}</span>
<a id="__codelineno-12-199" name="__codelineno-12-199" href="#__codelineno-12-199"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-200" name="__codelineno-12-200" href="#__codelineno-12-200"></a>
<a id="__codelineno-12-201" name="__codelineno-12-201" href="#__codelineno-12-201"></a><span class="s2">        {{~get &quot;</span><span class="nv">result</span><span class="s2">&quot; ~}}</span>
<a id="__codelineno-12-202" name="__codelineno-12-202" href="#__codelineno-12-202"></a>
<a id="__codelineno-12-203" name="__codelineno-12-203" href="#__codelineno-12-203"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-204" name="__codelineno-12-204" href="#__codelineno-12-204"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-205" name="__codelineno-12-205" href="#__codelineno-12-205"></a>
<a id="__codelineno-12-206" name="__codelineno-12-206" href="#__codelineno-12-206"></a>
<a id="__codelineno-12-207" name="__codelineno-12-207" href="#__codelineno-12-207"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-208" name="__codelineno-12-208" href="#__codelineno-12-208"></a><span class="s2">    if (selection-text exists):</span>
<a id="__codelineno-12-209" name="__codelineno-12-209" href="#__codelineno-12-209"></a><span class="s2">        if (selection-text is exactly a dictionary):</span>
<a id="__codelineno-12-210" name="__codelineno-12-210" href="#__codelineno-12-210"></a><span class="s2">            return null</span>
<a id="__codelineno-12-211" name="__codelineno-12-211" href="#__codelineno-12-211"></a><span class="s2">        if (able to detect dictionary of which the selection-text is highlighting):</span>
<a id="__codelineno-12-212" name="__codelineno-12-212" href="#__codelineno-12-212"></a><span class="s2">            return &quot;</span><span class="nv">uses-glossary</span><span class="s2">&quot;</span>
<a id="__codelineno-12-213" name="__codelineno-12-213" href="#__codelineno-12-213"></a><span class="s2">        return null</span>
<a id="__codelineno-12-214" name="__codelineno-12-214" href="#__codelineno-12-214"></a><span class="s2">~}}</span>
<a id="__codelineno-12-215" name="__codelineno-12-215" href="#__codelineno-12-215"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-selection-uses-glossary</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-216" name="__codelineno-12-216" href="#__codelineno-12-216"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-217" name="__codelineno-12-217" href="#__codelineno-12-217"></a>
<a id="__codelineno-12-218" name="__codelineno-12-218" href="#__codelineno-12-218"></a><span class="s2">        {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot; &quot;&quot;}}{{/set~}}</span>
<a id="__codelineno-12-219" name="__codelineno-12-219" href="#__codelineno-12-219"></a>
<a id="__codelineno-12-220" name="__codelineno-12-220" href="#__codelineno-12-220"></a><span class="s2">        {{~! checks if the selected text matches a dictionary ~}}</span>
<a id="__codelineno-12-221" name="__codelineno-12-221" href="#__codelineno-12-221"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-dictionary</span><span class="s2">&quot;) true)~}}</span>
<a id="__codelineno-12-222" name="__codelineno-12-222" href="#__codelineno-12-222"></a><span class="s2">            {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-check-dictionary . ~}}{{/set~}}</span>
<a id="__codelineno-12-223" name="__codelineno-12-223" href="#__codelineno-12-223"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-224" name="__codelineno-12-224" href="#__codelineno-12-224"></a>
<a id="__codelineno-12-225" name="__codelineno-12-225" href="#__codelineno-12-225"></a><span class="s2">        {{~! checks if the selected text matches a definition in a dictionary ~}}</span>
<a id="__codelineno-12-226" name="__codelineno-12-226" href="#__codelineno-12-226"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">result</span><span class="s2">&quot;) &quot;&quot;) ~}}</span>
<a id="__codelineno-12-227" name="__codelineno-12-227" href="#__codelineno-12-227"></a><span class="s2">            {{~! selection-text is a dictionary -&gt; null ~}}</span>
<a id="__codelineno-12-228" name="__codelineno-12-228" href="#__codelineno-12-228"></a><span class="s2">        {{~else if</span>
<a id="__codelineno-12-229" name="__codelineno-12-229" href="#__codelineno-12-229"></a><span class="s2">            (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot;</span>
<a id="__codelineno-12-230" name="__codelineno-12-230" href="#__codelineno-12-230"></a><span class="s2">                (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-glossary</span><span class="s2">&quot;) true)</span>
<a id="__codelineno-12-231" name="__codelineno-12-231" href="#__codelineno-12-231"></a><span class="s2">                (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-glossary-attempt-bold</span><span class="s2">&quot;) true)</span>
<a id="__codelineno-12-232" name="__codelineno-12-232" href="#__codelineno-12-232"></a><span class="s2">            )</span>
<a id="__codelineno-12-233" name="__codelineno-12-233" href="#__codelineno-12-233"></a><span class="s2">        ~}}</span>
<a id="__codelineno-12-234" name="__codelineno-12-234" href="#__codelineno-12-234"></a><span class="s2">            {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-get-dict-if-glossary-selected . ~}}{{/set~}}</span>
<a id="__codelineno-12-235" name="__codelineno-12-235" href="#__codelineno-12-235"></a><span class="s2">            {{~#if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">result</span><span class="s2">&quot;) &quot;&quot;) ~}}</span>
<a id="__codelineno-12-236" name="__codelineno-12-236" href="#__codelineno-12-236"></a><span class="s2">                {{~! selection-text dict found -&gt; &quot;</span><span class="nv">uses-glossary</span><span class="s2">&quot; ~}}</span>
<a id="__codelineno-12-237" name="__codelineno-12-237" href="#__codelineno-12-237"></a><span class="s2">                uses-glossary</span>
<a id="__codelineno-12-238" name="__codelineno-12-238" href="#__codelineno-12-238"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-239" name="__codelineno-12-239" href="#__codelineno-12-239"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-240" name="__codelineno-12-240" href="#__codelineno-12-240"></a>
<a id="__codelineno-12-241" name="__codelineno-12-241" href="#__codelineno-12-241"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-242" name="__codelineno-12-242" href="#__codelineno-12-242"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-243" name="__codelineno-12-243" href="#__codelineno-12-243"></a>
<a id="__codelineno-12-244" name="__codelineno-12-244" href="#__codelineno-12-244"></a>
<a id="__codelineno-12-245" name="__codelineno-12-245" href="#__codelineno-12-245"></a>
<a id="__codelineno-12-246" name="__codelineno-12-246" href="#__codelineno-12-246"></a>
<a id="__codelineno-12-247" name="__codelineno-12-247" href="#__codelineno-12-247"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-248" name="__codelineno-12-248" href="#__codelineno-12-248"></a><span class="s2">    if (selection-text exists):</span>
<a id="__codelineno-12-249" name="__codelineno-12-249" href="#__codelineno-12-249"></a><span class="s2">        if (selection-text is exactly a dictionary):</span>
<a id="__codelineno-12-250" name="__codelineno-12-250" href="#__codelineno-12-250"></a><span class="s2">            return dictionary</span>
<a id="__codelineno-12-251" name="__codelineno-12-251" href="#__codelineno-12-251"></a><span class="s2">        if (able to detect dictionary of which the selection-text is highlighting):</span>
<a id="__codelineno-12-252" name="__codelineno-12-252" href="#__codelineno-12-252"></a><span class="s2">            return dictionary</span>
<a id="__codelineno-12-253" name="__codelineno-12-253" href="#__codelineno-12-253"></a><span class="s2">        if (selection-text-glossary is not enabled):</span>
<a id="__codelineno-12-254" name="__codelineno-12-254" href="#__codelineno-12-254"></a><span class="s2">            return first-dictionary (determined by `opt-first-definition-type`)</span>
<a id="__codelineno-12-255" name="__codelineno-12-255" href="#__codelineno-12-255"></a><span class="s2">        return null</span>
<a id="__codelineno-12-256" name="__codelineno-12-256" href="#__codelineno-12-256"></a>
<a id="__codelineno-12-257" name="__codelineno-12-257" href="#__codelineno-12-257"></a><span class="s2">    else:</span>
<a id="__codelineno-12-258" name="__codelineno-12-258" href="#__codelineno-12-258"></a><span class="s2">        return first-dictionary (determined by `opt-first-definition-type`)</span>
<a id="__codelineno-12-259" name="__codelineno-12-259" href="#__codelineno-12-259"></a><span class="s2">~}}</span>
<a id="__codelineno-12-260" name="__codelineno-12-260" href="#__codelineno-12-260"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-get-primary-definition-dict</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-261" name="__codelineno-12-261" href="#__codelineno-12-261"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-262" name="__codelineno-12-262" href="#__codelineno-12-262"></a>
<a id="__codelineno-12-263" name="__codelineno-12-263" href="#__codelineno-12-263"></a><span class="s2">        {{~! first checks selection text ~}}</span>
<a id="__codelineno-12-264" name="__codelineno-12-264" href="#__codelineno-12-264"></a><span class="s2">        {{~#set &quot;</span><span class="nv">selection</span><span class="s2">&quot;}}{{~&gt; _jpmn-selection-text ~}}{{/set~}}</span>
<a id="__codelineno-12-265" name="__codelineno-12-265" href="#__codelineno-12-265"></a><span class="s2">        {{~#if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">selection</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-266" name="__codelineno-12-266" href="#__codelineno-12-266"></a>
<a id="__codelineno-12-267" name="__codelineno-12-267" href="#__codelineno-12-267"></a><span class="s2">            {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-check-dictionary-and-glossary . ~}}{{/set~}}</span>
<a id="__codelineno-12-268" name="__codelineno-12-268" href="#__codelineno-12-268"></a>
<a id="__codelineno-12-269" name="__codelineno-12-269" href="#__codelineno-12-269"></a><span class="s2">            {{~! doesn&#39;t return a dictionary if opt-selection-text-glossary is false b/c ~}}</span>
<a id="__codelineno-12-270" name="__codelineno-12-270" href="#__codelineno-12-270"></a><span class="s2">            {{~#if</span>
<a id="__codelineno-12-271" name="__codelineno-12-271" href="#__codelineno-12-271"></a><span class="s2">                (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot;</span>
<a id="__codelineno-12-272" name="__codelineno-12-272" href="#__codelineno-12-272"></a><span class="s2">                    (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">result</span><span class="s2">&quot;) &quot;&quot;)</span>
<a id="__codelineno-12-273" name="__codelineno-12-273" href="#__codelineno-12-273"></a><span class="s2">                    (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">opt-selection-text-glossary</span><span class="s2">&quot;) false)</span>
<a id="__codelineno-12-274" name="__codelineno-12-274" href="#__codelineno-12-274"></a><span class="s2">                )</span>
<a id="__codelineno-12-275" name="__codelineno-12-275" href="#__codelineno-12-275"></a><span class="s2">            ~}}</span>
<a id="__codelineno-12-276" name="__codelineno-12-276" href="#__codelineno-12-276"></a><span class="s2">                {{~#set &quot;</span><span class="nv">result</span><span class="s2">&quot;}}{{~&gt; _jpmn-search-primary-definition-dict . ~}}{{/set~}}</span>
<a id="__codelineno-12-277" name="__codelineno-12-277" href="#__codelineno-12-277"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-278" name="__codelineno-12-278" href="#__codelineno-12-278"></a>
<a id="__codelineno-12-279" name="__codelineno-12-279" href="#__codelineno-12-279"></a><span class="s2">            {{~get &quot;</span><span class="nv">result</span><span class="s2">&quot; ~}}</span>
<a id="__codelineno-12-280" name="__codelineno-12-280" href="#__codelineno-12-280"></a>
<a id="__codelineno-12-281" name="__codelineno-12-281" href="#__codelineno-12-281"></a><span class="s2">        {{~! no selection text ~}}</span>
<a id="__codelineno-12-282" name="__codelineno-12-282" href="#__codelineno-12-282"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-283" name="__codelineno-12-283" href="#__codelineno-12-283"></a><span class="s2">            {{~&gt; _jpmn-search-primary-definition-dict . ~}}</span>
<a id="__codelineno-12-284" name="__codelineno-12-284" href="#__codelineno-12-284"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-285" name="__codelineno-12-285" href="#__codelineno-12-285"></a>
<a id="__codelineno-12-286" name="__codelineno-12-286" href="#__codelineno-12-286"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-287" name="__codelineno-12-287" href="#__codelineno-12-287"></a>
<a id="__codelineno-12-288" name="__codelineno-12-288" href="#__codelineno-12-288"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-289" name="__codelineno-12-289" href="#__codelineno-12-289"></a>
<a id="__codelineno-12-290" name="__codelineno-12-290" href="#__codelineno-12-290"></a>
<a id="__codelineno-12-291" name="__codelineno-12-291" href="#__codelineno-12-291"></a><span class="s2">{{~#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-get-primary-definition-value</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-292" name="__codelineno-12-292" href="#__codelineno-12-292"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-293" name="__codelineno-12-293" href="#__codelineno-12-293"></a>
<a id="__codelineno-12-294" name="__codelineno-12-294" href="#__codelineno-12-294"></a><span class="s2">        &lt;ol&gt;</span>
<a id="__codelineno-12-295" name="__codelineno-12-295" href="#__codelineno-12-295"></a><span class="s2">        {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-296" name="__codelineno-12-296" href="#__codelineno-12-296"></a><span class="s2">            {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; dictionary (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;))~}}</span>
<a id="__codelineno-12-297" name="__codelineno-12-297" href="#__codelineno-12-297"></a><span class="s2">                &lt;li data-details=&quot;</span><span class="err">{{~</span><span class="nv">dictionary</span><span class="m">~</span><span class="cp">}}</span><span class="x">&quot;&gt;</span>
<a id="__codelineno-12-298" name="__codelineno-12-298" href="#__codelineno-12-298"></a><span class="x">                    </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-glossary-single</span> <span class="err">.</span> <span class="na">brief</span><span class="o">=</span><span class="nv">../brief</span> <span class="na">noDictionaryTag</span><span class="o">=</span><span class="nv">../noDictionaryTag</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-299" name="__codelineno-12-299" href="#__codelineno-12-299"></a><span class="x">                &lt;/li&gt;</span>
<a id="__codelineno-12-300" name="__codelineno-12-300" href="#__codelineno-12-300"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-301" name="__codelineno-12-301" href="#__codelineno-12-301"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-302" name="__codelineno-12-302" href="#__codelineno-12-302"></a><span class="x">        &lt;/ol&gt;</span>
<a id="__codelineno-12-303" name="__codelineno-12-303" href="#__codelineno-12-303"></a>
<a id="__codelineno-12-304" name="__codelineno-12-304" href="#__codelineno-12-304"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-305" name="__codelineno-12-305" href="#__codelineno-12-305"></a>
<a id="__codelineno-12-306" name="__codelineno-12-306" href="#__codelineno-12-306"></a><span class="cp">{{</span><span class="m m-Attribute">~/inline~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-307" name="__codelineno-12-307" href="#__codelineno-12-307"></a>
<a id="__codelineno-12-308" name="__codelineno-12-308" href="#__codelineno-12-308"></a>
<a id="__codelineno-12-309" name="__codelineno-12-309" href="#__codelineno-12-309"></a>
<a id="__codelineno-12-310" name="__codelineno-12-310" href="#__codelineno-12-310"></a>
<a id="__codelineno-12-311" name="__codelineno-12-311" href="#__codelineno-12-311"></a>
<a id="__codelineno-12-312" name="__codelineno-12-312" href="#__codelineno-12-312"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">custom</span> <span class="nv">glossary-single</span> <span class="nv">function</span> <span class="nv">for</span> <span class="nv">additional</span> <span class="nv">regex</span> <span class="nv">parsing</span> <span class="nv">per</span> <span class="nv">dictionary</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-313" name="__codelineno-12-313" href="#__codelineno-12-313"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">OVERRIDES</span> <span class="nv">brief</span> <span class="nv">and</span> <span class="nv">noDictionaryTag</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-314" name="__codelineno-12-314" href="#__codelineno-12-314"></a><span class="cp">{{</span><span class="m m-Attribute">#*inline</span> <span class="s2">&quot;_jpmn-glossary-single&quot;</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-315" name="__codelineno-12-315" href="#__codelineno-12-315"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-316" name="__codelineno-12-316" href="#__codelineno-12-316"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="na">&quot;==</span><span class="o">=</span><span class="s2">&quot; dictionary &quot;</span><span class="nv">NHK日本語発音アクセント新辞典</span><span class="s2">&quot;)~}}</span>
<a id="__codelineno-12-317" name="__codelineno-12-317" href="#__codelineno-12-317"></a><span class="s2">            {{~#regexReplace &quot;</span><span class="err">&lt;</span><span class="nv">br</span><span class="err">&gt;</span> <span class="err">・</span><span class="s2">&quot; &quot;</span><span class="err">&lt;</span><span class="nv">br</span><span class="err">&gt;</span><span class="s2">&quot; &quot;</span><span class="nv">g</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-318" name="__codelineno-12-318" href="#__codelineno-12-318"></a><span class="s2">                {{~&gt; _jpmn-glossary-single-override . ~}}</span>
<a id="__codelineno-12-319" name="__codelineno-12-319" href="#__codelineno-12-319"></a><span class="s2">            {{~/regexReplace~}}</span>
<a id="__codelineno-12-320" name="__codelineno-12-320" href="#__codelineno-12-320"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-321" name="__codelineno-12-321" href="#__codelineno-12-321"></a><span class="s2">            {{~&gt; _jpmn-glossary-single-override . ~}}</span>
<a id="__codelineno-12-322" name="__codelineno-12-322" href="#__codelineno-12-322"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-323" name="__codelineno-12-323" href="#__codelineno-12-323"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-324" name="__codelineno-12-324" href="#__codelineno-12-324"></a><span class="s2">{{/inline}}</span>
<a id="__codelineno-12-325" name="__codelineno-12-325" href="#__codelineno-12-325"></a>
<a id="__codelineno-12-326" name="__codelineno-12-326" href="#__codelineno-12-326"></a>
<a id="__codelineno-12-327" name="__codelineno-12-327" href="#__codelineno-12-327"></a><span class="s2">{{~! custom glossary-single function to add custom html around the dictionary and tags ~}}</span>
<a id="__codelineno-12-328" name="__codelineno-12-328" href="#__codelineno-12-328"></a><span class="s2">{{#*inline &quot;</span><span class="err">_</span><span class="nv">jpmn-glossary-single-override</span><span class="s2">&quot;}}</span>
<a id="__codelineno-12-329" name="__codelineno-12-329" href="#__codelineno-12-329"></a>
<a id="__codelineno-12-330" name="__codelineno-12-330" href="#__codelineno-12-330"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-331" name="__codelineno-12-331" href="#__codelineno-12-331"></a>
<a id="__codelineno-12-332" name="__codelineno-12-332" href="#__codelineno-12-332"></a><span class="s2">        &lt;span class=&quot;</span><span class="nv">dict-group__tag-list</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-333" name="__codelineno-12-333" href="#__codelineno-12-333"></a>
<a id="__codelineno-12-334" name="__codelineno-12-334" href="#__codelineno-12-334"></a><span class="s2">            {{~! only italics if jp-characters-regex finds no matches ~}}</span>
<a id="__codelineno-12-335" name="__codelineno-12-335" href="#__codelineno-12-335"></a><span class="s2">            {{~#set &quot;</span><span class="nv">italics-start</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-336" name="__codelineno-12-336" href="#__codelineno-12-336"></a><span class="s2">            {{~#set &quot;</span><span class="nv">italics-end</span><span class="s2">&quot;}}{{/set~}}</span>
<a id="__codelineno-12-337" name="__codelineno-12-337" href="#__codelineno-12-337"></a>
<a id="__codelineno-12-338" name="__codelineno-12-338" href="#__codelineno-12-338"></a><span class="s2">            {{~#set &quot;</span><span class="nv">any</span><span class="s2">&quot; false}}{{/set~}}</span>
<a id="__codelineno-12-339" name="__codelineno-12-339" href="#__codelineno-12-339"></a><span class="s2">            {{~#each definitionTags~}}</span>
<a id="__codelineno-12-340" name="__codelineno-12-340" href="#__codelineno-12-340"></a>
<a id="__codelineno-12-341" name="__codelineno-12-341" href="#__codelineno-12-341"></a><span class="s2">                &lt;span class=&quot;</span><span class="nv">dict-group__tag</span> <span class="nv">dict-group__tag--name</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-342" name="__codelineno-12-342" href="#__codelineno-12-342"></a><span class="s2">                    &lt;span class=&quot;</span><span class="nv">dict-group__tag-inner</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-343" name="__codelineno-12-343" href="#__codelineno-12-343"></a><span class="s2">                        {{~name~}}</span>
<a id="__codelineno-12-344" name="__codelineno-12-344" href="#__codelineno-12-344"></a><span class="s2">                    &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-345" name="__codelineno-12-345" href="#__codelineno-12-345"></a><span class="s2">                &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-346" name="__codelineno-12-346" href="#__codelineno-12-346"></a>
<a id="__codelineno-12-347" name="__codelineno-12-347" href="#__codelineno-12-347"></a><span class="s2">            {{~/each~}}</span>
<a id="__codelineno-12-348" name="__codelineno-12-348" href="#__codelineno-12-348"></a><span class="s2">            {{~#unless noDictionaryTag~}}</span>
<a id="__codelineno-12-349" name="__codelineno-12-349" href="#__codelineno-12-349"></a>
<a id="__codelineno-12-350" name="__codelineno-12-350" href="#__codelineno-12-350"></a><span class="s2">                &lt;span class=&quot;</span><span class="nv">dict-group__tag</span> <span class="nv">dict-group__tag--dict</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-351" name="__codelineno-12-351" href="#__codelineno-12-351"></a><span class="s2">                    &lt;span class=&quot;</span><span class="nv">dict-group__tag-inner</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-352" name="__codelineno-12-352" href="#__codelineno-12-352"></a><span class="s2">                        {{~dictionary~}}</span>
<a id="__codelineno-12-353" name="__codelineno-12-353" href="#__codelineno-12-353"></a><span class="s2">                    &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-354" name="__codelineno-12-354" href="#__codelineno-12-354"></a><span class="s2">                &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-355" name="__codelineno-12-355" href="#__codelineno-12-355"></a>
<a id="__codelineno-12-356" name="__codelineno-12-356" href="#__codelineno-12-356"></a><span class="s2">            {{~/unless~}}</span>
<a id="__codelineno-12-357" name="__codelineno-12-357" href="#__codelineno-12-357"></a><span class="s2">            {{~#if (get &quot;</span><span class="nv">any</span><span class="s2">&quot;)}}){{#get &quot;</span><span class="nv">italics-end</span><span class="s2">&quot;}}{{/get}} {{/if~}}</span>
<a id="__codelineno-12-358" name="__codelineno-12-358" href="#__codelineno-12-358"></a>
<a id="__codelineno-12-359" name="__codelineno-12-359" href="#__codelineno-12-359"></a><span class="s2">        &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-360" name="__codelineno-12-360" href="#__codelineno-12-360"></a>
<a id="__codelineno-12-361" name="__codelineno-12-361" href="#__codelineno-12-361"></a><span class="s2">        &lt;span class=&quot;</span><span class="nv">dict-group__glossary</span><span class="s2">&quot;&gt; {{~s~}}</span>
<a id="__codelineno-12-362" name="__codelineno-12-362" href="#__codelineno-12-362"></a><span class="s2">            {{~#each glossary}}{{#formatGlossary ../dictionary}}{{{.}}}{{/formatGlossary}}{{#unless @last}} | {{/unless}}{{/each~}}</span>
<a id="__codelineno-12-363" name="__codelineno-12-363" href="#__codelineno-12-363"></a><span class="s2">        &lt;/span&gt; {{~s~}}</span>
<a id="__codelineno-12-364" name="__codelineno-12-364" href="#__codelineno-12-364"></a>
<a id="__codelineno-12-365" name="__codelineno-12-365" href="#__codelineno-12-365"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-366" name="__codelineno-12-366" href="#__codelineno-12-366"></a>
<a id="__codelineno-12-367" name="__codelineno-12-367" href="#__codelineno-12-367"></a><span class="s2">    {{~#if only~}}({{#each only}}{{.}}{{#unless @last}}, {{/unless}}{{/each}} only) {{/if~}}</span>
<a id="__codelineno-12-368" name="__codelineno-12-368" href="#__codelineno-12-368"></a><span class="s2">{{/inline}}</span>
<a id="__codelineno-12-369" name="__codelineno-12-369" href="#__codelineno-12-369"></a>
<a id="__codelineno-12-370" name="__codelineno-12-370" href="#__codelineno-12-370"></a>
<a id="__codelineno-12-371" name="__codelineno-12-371" href="#__codelineno-12-371"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-372" name="__codelineno-12-372" href="#__codelineno-12-372"></a><span class="s2">    =============</span>
<a id="__codelineno-12-373" name="__codelineno-12-373" href="#__codelineno-12-373"></a><span class="s2">     frequencies</span>
<a id="__codelineno-12-374" name="__codelineno-12-374" href="#__codelineno-12-374"></a><span class="s2">    =============</span>
<a id="__codelineno-12-375" name="__codelineno-12-375" href="#__codelineno-12-375"></a><span class="s2">~}}</span>
<a id="__codelineno-12-376" name="__codelineno-12-376" href="#__codelineno-12-376"></a>
<a id="__codelineno-12-377" name="__codelineno-12-377" href="#__codelineno-12-377"></a><span class="s2">{{#*inline &quot;</span><span class="nv">jpmn-frequencies</span><span class="s2">&quot;}}</span>
<a id="__codelineno-12-378" name="__codelineno-12-378" href="#__codelineno-12-378"></a><span class="s2">    {{~#if (op &quot;</span><span class="err">&gt;</span><span class="s2">&quot; definition.frequencies.length 0)~}}</span>
<a id="__codelineno-12-379" name="__codelineno-12-379" href="#__codelineno-12-379"></a><span class="s2">        {{~#each definition.frequencies~}}</span>
<a id="__codelineno-12-380" name="__codelineno-12-380" href="#__codelineno-12-380"></a><span class="s2">            &lt;div class=&quot;</span><span class="nv">frequencies__group</span><span class="s2">&quot; data-details=&quot;</span><span class="err">{{~</span><span class="nv">dictionary</span><span class="m">~</span><span class="cp">}}</span><span class="x">&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-381" name="__codelineno-12-381" href="#__codelineno-12-381"></a><span class="x">                &lt;div class=&quot;frequencies__number&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-382" name="__codelineno-12-382" href="#__codelineno-12-382"></a><span class="x">                    &lt;span class=&quot;frequencies__number-inner&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-383" name="__codelineno-12-383" href="#__codelineno-12-383"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">removes</span> <span class="nv">the</span> <span class="s2">&quot;X&quot;</span> <span class="nv">in</span> <span class="nv">JPDB</span><span class="err">&#39;</span><span class="nv">s</span> <span class="nv">frequency</span> <span class="nv">and</span> <span class="nv">replaces</span> <span class="nv">it</span> <span class="nv">with</span> <span class="nv">a</span> <span class="nv">less</span> <span class="nv">assuming</span> <span class="nv">character</span>
<a id="__codelineno-12-384" name="__codelineno-12-384" href="#__codelineno-12-384"></a>                            <span class="nv">(it</span> <span class="nv">interferes</span> <span class="nv">with</span> <span class="nv">the</span> <span class="nv">color</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">card</span><span class="err">,</span> <span class="nv">since</span> <span class="nv">you</span> <span class="nv">see</span> <span class="nv">red</span>
<a id="__codelineno-12-385" name="__codelineno-12-385" href="#__codelineno-12-385"></a>                            <span class="nv">at</span> <span class="nv">the</span> <span class="nv">top</span> <span class="nv">corner</span> <span class="nv">which</span> <span class="nv">is</span> <span class="nv">somewhat</span> <span class="nv">distracting)</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-386" name="__codelineno-12-386" href="#__codelineno-12-386"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~#regexReplace</span> <span class="s2">&quot;❌&quot;</span> <span class="s2">&quot;✖&quot;</span> <span class="s2">&quot;g&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-387" name="__codelineno-12-387" href="#__codelineno-12-387"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~frequency~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-388" name="__codelineno-12-388" href="#__codelineno-12-388"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~/regexReplace~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-389" name="__codelineno-12-389" href="#__codelineno-12-389"></a><span class="x">                    &lt;/span&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-390" name="__codelineno-12-390" href="#__codelineno-12-390"></a><span class="x">                &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-391" name="__codelineno-12-391" href="#__codelineno-12-391"></a><span class="x">                &lt;div class=&quot;frequencies__dictionary&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-392" name="__codelineno-12-392" href="#__codelineno-12-392"></a><span class="x">                    &lt;span class=&quot;frequencies__dictionary-inner&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-393" name="__codelineno-12-393" href="#__codelineno-12-393"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~dictionary~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-394" name="__codelineno-12-394" href="#__codelineno-12-394"></a><span class="x">                    &lt;/span&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-395" name="__codelineno-12-395" href="#__codelineno-12-395"></a><span class="x">                &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-396" name="__codelineno-12-396" href="#__codelineno-12-396"></a><span class="x">            &lt;/div&gt;</span>
<a id="__codelineno-12-397" name="__codelineno-12-397" href="#__codelineno-12-397"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-398" name="__codelineno-12-398" href="#__codelineno-12-398"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-399" name="__codelineno-12-399" href="#__codelineno-12-399"></a><span class="cp">{{</span><span class="m m-Attribute">/inline</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-400" name="__codelineno-12-400" href="#__codelineno-12-400"></a>
<a id="__codelineno-12-401" name="__codelineno-12-401" href="#__codelineno-12-401"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">taken</span> <span class="nv">from</span> <span class="nv">here</span><span class="err">:</span> <span class="nv">https</span><span class="err">:</span><span class="nv">//github.com/MarvNC/JP-Resources</span><span class="err">#</span><span class="nv">sorting-mined-anki-cards-by-frequency</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-402" name="__codelineno-12-402" href="#__codelineno-12-402"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-min-freq&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-403" name="__codelineno-12-403" href="#__codelineno-12-403"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-404" name="__codelineno-12-404" href="#__codelineno-12-404"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;min-freq&quot;</span> <span class="m">0~</span><span class="cp">}}{{</span><span class="m m-Attribute">~/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-405" name="__codelineno-12-405" href="#__codelineno-12-405"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">definition.frequencies</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-406" name="__codelineno-12-406" href="#__codelineno-12-406"></a><span class="x">                </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="s2">&quot;||&quot;</span> <span class="nv">(op</span> <span class="na">&quot;==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">min-freq</span><span class="s2">&quot;) 0) (op &quot;</span><span class="err">&gt;</span><span class="s2">&quot; (op &quot;</span><span class="err">+</span><span class="s2">&quot; (get &quot;</span><span class="nv">min-freq</span><span class="s2">&quot;)) (op &quot;</span><span class="err">+</span><span class="s2">&quot; (regexMatch &quot;</span><span class="err">\</span><span class="nv">d</span><span class="s2">&quot; &quot;</span><span class="nv">g</span><span class="s2">&quot; this.frequency))))}}</span>
<a id="__codelineno-12-407" name="__codelineno-12-407" href="#__codelineno-12-407"></a><span class="s2">                    {{~#set &quot;</span><span class="nv">min-freq</span><span class="s2">&quot; (op &quot;</span><span class="err">+</span><span class="s2">&quot; (regexMatch &quot;</span><span class="err">\</span><span class="nv">d</span><span class="s2">&quot; &quot;</span><span class="nv">g</span><span class="s2">&quot; this.frequency))}}{{/set~}}</span>
<a id="__codelineno-12-408" name="__codelineno-12-408" href="#__codelineno-12-408"></a><span class="s2">                {{~/if~}}</span>
<a id="__codelineno-12-409" name="__codelineno-12-409" href="#__codelineno-12-409"></a><span class="s2">            {{~/each~}}</span>
<a id="__codelineno-12-410" name="__codelineno-12-410" href="#__codelineno-12-410"></a><span class="s2">        {{~get &quot;</span><span class="nv">min-freq</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-411" name="__codelineno-12-411" href="#__codelineno-12-411"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-412" name="__codelineno-12-412" href="#__codelineno-12-412"></a><span class="s2">{{/inline}}</span>
<a id="__codelineno-12-413" name="__codelineno-12-413" href="#__codelineno-12-413"></a>
<a id="__codelineno-12-414" name="__codelineno-12-414" href="#__codelineno-12-414"></a>
<a id="__codelineno-12-415" name="__codelineno-12-415" href="#__codelineno-12-415"></a><span class="s2">{{~!</span>
<a id="__codelineno-12-416" name="__codelineno-12-416" href="#__codelineno-12-416"></a><span class="s2">    ==============</span>
<a id="__codelineno-12-417" name="__codelineno-12-417" href="#__codelineno-12-417"></a><span class="s2">     pitch accent</span>
<a id="__codelineno-12-418" name="__codelineno-12-418" href="#__codelineno-12-418"></a><span class="s2">    ==============</span>
<a id="__codelineno-12-419" name="__codelineno-12-419" href="#__codelineno-12-419"></a><span class="s2">~}}</span>
<a id="__codelineno-12-420" name="__codelineno-12-420" href="#__codelineno-12-420"></a>
<a id="__codelineno-12-421" name="__codelineno-12-421" href="#__codelineno-12-421"></a><span class="s2">{{#*inline &quot;</span><span class="nv">jpmn-pitch-accent-graphs</span><span class="s2">&quot;}}</span>
<a id="__codelineno-12-422" name="__codelineno-12-422" href="#__codelineno-12-422"></a><span class="s2">    {{~#if (op &quot;</span><span class="err">&gt;</span><span class="s2">&quot; pitchCount 0)~}}</span>
<a id="__codelineno-12-423" name="__codelineno-12-423" href="#__codelineno-12-423"></a><span class="s2">        {{~#each pitches~}}</span>
<a id="__codelineno-12-424" name="__codelineno-12-424" href="#__codelineno-12-424"></a><span class="s2">            &lt;div class=&quot;</span><span class="nv">pa-graphs__group</span><span class="s2">&quot; data-details=&quot;</span><span class="err">{{</span><span class="nv">dictionary</span><span class="cp">}}</span><span class="x">&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-425" name="__codelineno-12-425" href="#__codelineno-12-425"></a><span class="x">                &lt;div class=&quot;pa-graphs__dictionary&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-426" name="__codelineno-12-426" href="#__codelineno-12-426"></a><span class="x">                    &lt;div class=&quot;pa-graphs__dictionary-inner&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-427" name="__codelineno-12-427" href="#__codelineno-12-427"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~dictionary~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-428" name="__codelineno-12-428" href="#__codelineno-12-428"></a><span class="x">                    &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-429" name="__codelineno-12-429" href="#__codelineno-12-429"></a><span class="x">                &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-430" name="__codelineno-12-430" href="#__codelineno-12-430"></a><span class="x">                &lt;ol&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-431" name="__codelineno-12-431" href="#__codelineno-12-431"></a><span class="x">                    </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">pitches</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-432" name="__codelineno-12-432" href="#__codelineno-12-432"></a><span class="x">                        &lt;li&gt;</span>
<a id="__codelineno-12-433" name="__codelineno-12-433" href="#__codelineno-12-433"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">pitch-accent-item-disambiguation</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-434" name="__codelineno-12-434" href="#__codelineno-12-434"></a>
<a id="__codelineno-12-435" name="__codelineno-12-435" href="#__codelineno-12-435"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-436" name="__codelineno-12-436" href="#__codelineno-12-436"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;any&quot;</span> <span class="nv">false</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-437" name="__codelineno-12-437" href="#__codelineno-12-437"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">tags</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-438" name="__codelineno-12-438" href="#__codelineno-12-438"></a><span class="x">                                    </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(get</span> <span class="s2">&quot;any&quot;</span><span class="nv">)</span><span class="cp">}}</span><span class="x">, </span><span class="cp">{{</span><span class="nv">else</span><span class="cp">}}</span><span class="x">(</span><span class="cp">{{</span><span class="m m-Attribute">/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-439" name="__codelineno-12-439" href="#__codelineno-12-439"></a><span class="x">                                    </span><span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-440" name="__codelineno-12-440" href="#__codelineno-12-440"></a><span class="x">                                    </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;any&quot;</span> <span class="nv">true</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-441" name="__codelineno-12-441" href="#__codelineno-12-441"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-442" name="__codelineno-12-442" href="#__codelineno-12-442"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(get</span> <span class="s2">&quot;any&quot;</span><span class="nv">)</span><span class="cp">}}</span><span class="x">) </span><span class="cp">{{</span><span class="m m-Attribute">/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-443" name="__codelineno-12-443" href="#__codelineno-12-443"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-444" name="__codelineno-12-444" href="#__codelineno-12-444"></a>
<a id="__codelineno-12-445" name="__codelineno-12-445" href="#__codelineno-12-445"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">pitch-accent-item</span> <span class="na">format</span><span class="o">=</span><span class="s2">&quot;graph&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-446" name="__codelineno-12-446" href="#__codelineno-12-446"></a><span class="x">                        &lt;/li&gt;</span>
<a id="__codelineno-12-447" name="__codelineno-12-447" href="#__codelineno-12-447"></a><span class="x">                    </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-448" name="__codelineno-12-448" href="#__codelineno-12-448"></a><span class="x">                &lt;/ol&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-449" name="__codelineno-12-449" href="#__codelineno-12-449"></a><span class="x">            &lt;/div&gt;</span>
<a id="__codelineno-12-450" name="__codelineno-12-450" href="#__codelineno-12-450"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-451" name="__codelineno-12-451" href="#__codelineno-12-451"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-452" name="__codelineno-12-452" href="#__codelineno-12-452"></a><span class="cp">{{</span><span class="m m-Attribute">/inline</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-453" name="__codelineno-12-453" href="#__codelineno-12-453"></a>
<a id="__codelineno-12-454" name="__codelineno-12-454" href="#__codelineno-12-454"></a>
<a id="__codelineno-12-455" name="__codelineno-12-455" href="#__codelineno-12-455"></a><span class="cp">{{</span><span class="m m-Attribute">#*inline</span> <span class="s2">&quot;jpmn-pitch-accent-positions&quot;</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-456" name="__codelineno-12-456" href="#__codelineno-12-456"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="s2">&quot;&gt;&quot;</span> <span class="nv">pitchCount</span> <span class="m">0</span><span class="nv">)</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-457" name="__codelineno-12-457" href="#__codelineno-12-457"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">pitches</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-458" name="__codelineno-12-458" href="#__codelineno-12-458"></a><span class="x">            &lt;div class=&quot;pa-positions__group&quot; data-details=&quot;</span><span class="cp">{{</span><span class="nv">dictionary</span><span class="cp">}}</span><span class="x">&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-459" name="__codelineno-12-459" href="#__codelineno-12-459"></a><span class="x">                &lt;div class=&quot;pa-positions__dictionary&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-460" name="__codelineno-12-460" href="#__codelineno-12-460"></a><span class="x">                    &lt;div class=&quot;pa-positions__dictionary-inner&quot;&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-461" name="__codelineno-12-461" href="#__codelineno-12-461"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~dictionary~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-462" name="__codelineno-12-462" href="#__codelineno-12-462"></a><span class="x">                    &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-463" name="__codelineno-12-463" href="#__codelineno-12-463"></a><span class="x">                &lt;/div&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-464" name="__codelineno-12-464" href="#__codelineno-12-464"></a><span class="x">                &lt;ol&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-465" name="__codelineno-12-465" href="#__codelineno-12-465"></a><span class="x">                    </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">pitches</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-466" name="__codelineno-12-466" href="#__codelineno-12-466"></a><span class="x">                        &lt;li&gt;</span>
<a id="__codelineno-12-467" name="__codelineno-12-467" href="#__codelineno-12-467"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">pitch-accent-item-disambiguation</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-468" name="__codelineno-12-468" href="#__codelineno-12-468"></a>
<a id="__codelineno-12-469" name="__codelineno-12-469" href="#__codelineno-12-469"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-470" name="__codelineno-12-470" href="#__codelineno-12-470"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;any&quot;</span> <span class="nv">false</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-471" name="__codelineno-12-471" href="#__codelineno-12-471"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">tags</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-472" name="__codelineno-12-472" href="#__codelineno-12-472"></a><span class="x">                                    </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(get</span> <span class="s2">&quot;any&quot;</span><span class="nv">)</span><span class="cp">}}</span><span class="x">, </span><span class="cp">{{</span><span class="nv">else</span><span class="cp">}}</span><span class="x">(</span><span class="cp">{{</span><span class="m m-Attribute">/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-473" name="__codelineno-12-473" href="#__codelineno-12-473"></a><span class="x">                                    </span><span class="cp">{{</span><span class="nv">name</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-474" name="__codelineno-12-474" href="#__codelineno-12-474"></a><span class="x">                                    </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;any&quot;</span> <span class="nv">true</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-475" name="__codelineno-12-475" href="#__codelineno-12-475"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-476" name="__codelineno-12-476" href="#__codelineno-12-476"></a><span class="x">                                </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(get</span> <span class="s2">&quot;any&quot;</span><span class="nv">)</span><span class="cp">}}</span><span class="x">) </span><span class="cp">{{</span><span class="m m-Attribute">/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-477" name="__codelineno-12-477" href="#__codelineno-12-477"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-478" name="__codelineno-12-478" href="#__codelineno-12-478"></a>
<a id="__codelineno-12-479" name="__codelineno-12-479" href="#__codelineno-12-479"></a><span class="x">                            </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">pitch-accent-item</span> <span class="na">format</span><span class="o">=</span><span class="s2">&quot;position&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-480" name="__codelineno-12-480" href="#__codelineno-12-480"></a><span class="x">                        &lt;/li&gt;</span>
<a id="__codelineno-12-481" name="__codelineno-12-481" href="#__codelineno-12-481"></a><span class="x">                    </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-482" name="__codelineno-12-482" href="#__codelineno-12-482"></a><span class="x">                &lt;/ol&gt; </span><span class="cp">{{</span><span class="m m-Attribute">~s~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-483" name="__codelineno-12-483" href="#__codelineno-12-483"></a><span class="x">            &lt;/div&gt;</span>
<a id="__codelineno-12-484" name="__codelineno-12-484" href="#__codelineno-12-484"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-485" name="__codelineno-12-485" href="#__codelineno-12-485"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-486" name="__codelineno-12-486" href="#__codelineno-12-486"></a><span class="cp">{{</span><span class="m m-Attribute">/inline</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-487" name="__codelineno-12-487" href="#__codelineno-12-487"></a>
<a id="__codelineno-12-488" name="__codelineno-12-488" href="#__codelineno-12-488"></a>
<a id="__codelineno-12-489" name="__codelineno-12-489" href="#__codelineno-12-489"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span>
<a id="__codelineno-12-490" name="__codelineno-12-490" href="#__codelineno-12-490"></a>    <span class="na">=============</span><span class="o">=</span>
<a id="__codelineno-12-491" name="__codelineno-12-491" href="#__codelineno-12-491"></a>     <span class="nv">dictionaries</span>
<a id="__codelineno-12-492" name="__codelineno-12-492" href="#__codelineno-12-492"></a>    <span class="na">=============</span><span class="o">=</span>
<a id="__codelineno-12-493" name="__codelineno-12-493" href="#__codelineno-12-493"></a><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-494" name="__codelineno-12-494" href="#__codelineno-12-494"></a>
<a id="__codelineno-12-495" name="__codelineno-12-495" href="#__codelineno-12-495"></a>
<a id="__codelineno-12-496" name="__codelineno-12-496" href="#__codelineno-12-496"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">primary</span> <span class="nv">def</span><span class="err">:</span> <span class="nv">first</span> <span class="nv">monolingual</span> <span class="nv">(or</span> <span class="nv">first</span> <span class="nv">bilingual</span> <span class="nv">if</span> <span class="nv">no</span> <span class="nv">monolingual</span> <span class="nv">dicts</span> <span class="nv">found)</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-497" name="__codelineno-12-497" href="#__codelineno-12-497"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">does</span> <span class="nv">the</span> <span class="nv">reverse</span> <span class="nv">if</span> <span class="nv">opt-first-definition-type</span> <span class="nv">is</span> <span class="s2">&quot;bilingual&quot;</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-498" name="__codelineno-12-498" href="#__codelineno-12-498"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-primary-definition&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-499" name="__codelineno-12-499" href="#__codelineno-12-499"></a>
<a id="__codelineno-12-500" name="__codelineno-12-500" href="#__codelineno-12-500"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-501" name="__codelineno-12-501" href="#__codelineno-12-501"></a>
<a id="__codelineno-12-502" name="__codelineno-12-502" href="#__codelineno-12-502"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;primary-dictionary&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-get-primary-definition-dict</span> <span class="err">.</span> <span class="m">~</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-503" name="__codelineno-12-503" href="#__codelineno-12-503"></a>
<a id="__codelineno-12-504" name="__codelineno-12-504" href="#__codelineno-12-504"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="na">&quot;==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-505" name="__codelineno-12-505" href="#__codelineno-12-505"></a><span class="s2">            {{~&gt; _jpmn-selection-text ~}}</span>
<a id="__codelineno-12-506" name="__codelineno-12-506" href="#__codelineno-12-506"></a><span class="s2">        {{~else~}}</span>
<a id="__codelineno-12-507" name="__codelineno-12-507" href="#__codelineno-12-507"></a><span class="s2">            {{~#set &quot;</span><span class="nv">selection</span><span class="s2">&quot;}}{{~&gt; _jpmn-selection-text ~}}{{/set~}}</span>
<a id="__codelineno-12-508" name="__codelineno-12-508" href="#__codelineno-12-508"></a><span class="s2">            {{~#set &quot;</span><span class="nv">selection-uses-glossary</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-509" name="__codelineno-12-509" href="#__codelineno-12-509"></a><span class="s2">                {{~&gt; _jpmn-selection-uses-glossary . ~}}</span>
<a id="__codelineno-12-510" name="__codelineno-12-510" href="#__codelineno-12-510"></a><span class="s2">            {{~/set~}}</span>
<a id="__codelineno-12-511" name="__codelineno-12-511" href="#__codelineno-12-511"></a>
<a id="__codelineno-12-512" name="__codelineno-12-512" href="#__codelineno-12-512"></a><span class="s2">            {{~! not &quot;&quot; &lt;=&gt; is a filled string ~}}</span>
<a id="__codelineno-12-513" name="__codelineno-12-513" href="#__codelineno-12-513"></a><span class="s2">            {{~#if (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">selection-uses-glossary</span><span class="s2">&quot;) &quot;&quot;)~}}</span>
<a id="__codelineno-12-514" name="__codelineno-12-514" href="#__codelineno-12-514"></a>
<a id="__codelineno-12-515" name="__codelineno-12-515" href="#__codelineno-12-515"></a><span class="s2">                {{~#set &quot;</span><span class="nv">search-selection</span><span class="s2">&quot;}}{{~&gt; _jpmn-escape-regex regexString=(get &quot;</span><span class="nv">selection</span><span class="s2">&quot;) ~}}{{/set~}}</span>
<a id="__codelineno-12-516" name="__codelineno-12-516" href="#__codelineno-12-516"></a><span class="s2">                {{~#set &quot;</span><span class="nv">search-selection-bold</span><span class="s2">&quot;}}&lt;b&gt;{{~ get &quot;</span><span class="nv">selection</span><span class="s2">&quot; ~}}&lt;/b&gt;{{/set~}}</span>
<a id="__codelineno-12-517" name="__codelineno-12-517" href="#__codelineno-12-517"></a>
<a id="__codelineno-12-518" name="__codelineno-12-518" href="#__codelineno-12-518"></a><span class="s2">                {{~#regexReplace (get &quot;</span><span class="nv">search-selection</span><span class="s2">&quot;) (get &quot;</span><span class="nv">search-selection-bold</span><span class="s2">&quot;) &quot;</span><span class="nv">g</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-519" name="__codelineno-12-519" href="#__codelineno-12-519"></a><span class="s2">                    {{~&gt; _jpmn-get-primary-definition-value . brief=../brief noDictionaryTag=../noDictionaryTag ~}}</span>
<a id="__codelineno-12-520" name="__codelineno-12-520" href="#__codelineno-12-520"></a><span class="s2">                {{~/regexReplace~}}</span>
<a id="__codelineno-12-521" name="__codelineno-12-521" href="#__codelineno-12-521"></a>
<a id="__codelineno-12-522" name="__codelineno-12-522" href="#__codelineno-12-522"></a><span class="s2">            {{~else~}}</span>
<a id="__codelineno-12-523" name="__codelineno-12-523" href="#__codelineno-12-523"></a><span class="s2">                {{~&gt; _jpmn-get-primary-definition-value . brief=../brief noDictionaryTag=../noDictionaryTag ~}}</span>
<a id="__codelineno-12-524" name="__codelineno-12-524" href="#__codelineno-12-524"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-525" name="__codelineno-12-525" href="#__codelineno-12-525"></a>
<a id="__codelineno-12-526" name="__codelineno-12-526" href="#__codelineno-12-526"></a><span class="s2">        {{~/if~}}</span>
<a id="__codelineno-12-527" name="__codelineno-12-527" href="#__codelineno-12-527"></a>
<a id="__codelineno-12-528" name="__codelineno-12-528" href="#__codelineno-12-528"></a><span class="s2">    {{~/scope~}}</span>
<a id="__codelineno-12-529" name="__codelineno-12-529" href="#__codelineno-12-529"></a>
<a id="__codelineno-12-530" name="__codelineno-12-530" href="#__codelineno-12-530"></a><span class="s2">{{~/inline~}}</span>
<a id="__codelineno-12-531" name="__codelineno-12-531" href="#__codelineno-12-531"></a>
<a id="__codelineno-12-532" name="__codelineno-12-532" href="#__codelineno-12-532"></a>
<a id="__codelineno-12-533" name="__codelineno-12-533" href="#__codelineno-12-533"></a><span class="s2">{{~! extra def: bilingual defs (excluding primary def) ~}}</span>
<a id="__codelineno-12-534" name="__codelineno-12-534" href="#__codelineno-12-534"></a><span class="s2">{{~#*inline &quot;</span><span class="nv">jpmn-secondary-definition</span><span class="s2">&quot;~}}</span>
<a id="__codelineno-12-535" name="__codelineno-12-535" href="#__codelineno-12-535"></a>
<a id="__codelineno-12-536" name="__codelineno-12-536" href="#__codelineno-12-536"></a><span class="s2">    {{~#scope~}}</span>
<a id="__codelineno-12-537" name="__codelineno-12-537" href="#__codelineno-12-537"></a>
<a id="__codelineno-12-538" name="__codelineno-12-538" href="#__codelineno-12-538"></a><span class="s2">        {{~#set &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;}}{{~&gt; _jpmn-get-primary-definition-dict . ~}}{{/set~}}</span>
<a id="__codelineno-12-539" name="__codelineno-12-539" href="#__codelineno-12-539"></a>
<a id="__codelineno-12-540" name="__codelineno-12-540" href="#__codelineno-12-540"></a><span class="s2">        {{~! looks to see if another dictionary exists ~}}</span>
<a id="__codelineno-12-541" name="__codelineno-12-541" href="#__codelineno-12-541"></a><span class="s2">        {{~#set &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot; false}}{{/set~}}</span>
<a id="__codelineno-12-542" name="__codelineno-12-542" href="#__codelineno-12-542"></a>
<a id="__codelineno-12-543" name="__codelineno-12-543" href="#__codelineno-12-543"></a><span class="s2">        {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-544" name="__codelineno-12-544" href="#__codelineno-12-544"></a><span class="s2">            {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-545" name="__codelineno-12-545" href="#__codelineno-12-545"></a><span class="s2">            {{~#if (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot; (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">bilingual</span><span class="s2">&quot;) (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;) dictionary))~}}</span>
<a id="__codelineno-12-546" name="__codelineno-12-546" href="#__codelineno-12-546"></a><span class="s2">                {{~#set &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot; true}}{{/set~}}</span>
<a id="__codelineno-12-547" name="__codelineno-12-547" href="#__codelineno-12-547"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-548" name="__codelineno-12-548" href="#__codelineno-12-548"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-549" name="__codelineno-12-549" href="#__codelineno-12-549"></a>
<a id="__codelineno-12-550" name="__codelineno-12-550" href="#__codelineno-12-550"></a><span class="s2">        {{~#if (get &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot;) ~}}</span>
<a id="__codelineno-12-551" name="__codelineno-12-551" href="#__codelineno-12-551"></a><span class="s2">            &lt;ol&gt;</span>
<a id="__codelineno-12-552" name="__codelineno-12-552" href="#__codelineno-12-552"></a><span class="s2">            {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-553" name="__codelineno-12-553" href="#__codelineno-12-553"></a><span class="s2">                {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-554" name="__codelineno-12-554" href="#__codelineno-12-554"></a><span class="s2">                {{~#if (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot; (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">bilingual</span><span class="s2">&quot;) (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;) dictionary))~}}</span>
<a id="__codelineno-12-555" name="__codelineno-12-555" href="#__codelineno-12-555"></a>
<a id="__codelineno-12-556" name="__codelineno-12-556" href="#__codelineno-12-556"></a><span class="s2">                    &lt;li data-details=&quot;</span><span class="err">{{~</span><span class="nv">dictionary</span><span class="m">~</span><span class="cp">}}</span><span class="x">&quot;&gt;</span>
<a id="__codelineno-12-557" name="__codelineno-12-557" href="#__codelineno-12-557"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-glossary-single</span> <span class="err">.</span> <span class="na">brief</span><span class="o">=</span><span class="nv">../brief</span> <span class="na">noDictionaryTag</span><span class="o">=</span><span class="nv">../noDictionaryTag</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-558" name="__codelineno-12-558" href="#__codelineno-12-558"></a><span class="x">                    &lt;/li&gt;</span>
<a id="__codelineno-12-559" name="__codelineno-12-559" href="#__codelineno-12-559"></a>
<a id="__codelineno-12-560" name="__codelineno-12-560" href="#__codelineno-12-560"></a><span class="x">                </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-561" name="__codelineno-12-561" href="#__codelineno-12-561"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-562" name="__codelineno-12-562" href="#__codelineno-12-562"></a><span class="x">            &lt;/ol&gt;</span>
<a id="__codelineno-12-563" name="__codelineno-12-563" href="#__codelineno-12-563"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-564" name="__codelineno-12-564" href="#__codelineno-12-564"></a>
<a id="__codelineno-12-565" name="__codelineno-12-565" href="#__codelineno-12-565"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-566" name="__codelineno-12-566" href="#__codelineno-12-566"></a>
<a id="__codelineno-12-567" name="__codelineno-12-567" href="#__codelineno-12-567"></a><span class="cp">{{</span><span class="m m-Attribute">~/inline~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-568" name="__codelineno-12-568" href="#__codelineno-12-568"></a>
<a id="__codelineno-12-569" name="__codelineno-12-569" href="#__codelineno-12-569"></a>
<a id="__codelineno-12-570" name="__codelineno-12-570" href="#__codelineno-12-570"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">extra</span> <span class="nv">def</span><span class="err">:</span> <span class="nv">monolingual</span> <span class="nv">defs</span> <span class="nv">(excluding</span> <span class="nv">primary</span> <span class="nv">def)</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-571" name="__codelineno-12-571" href="#__codelineno-12-571"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-extra-definitions&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-572" name="__codelineno-12-572" href="#__codelineno-12-572"></a>
<a id="__codelineno-12-573" name="__codelineno-12-573" href="#__codelineno-12-573"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-574" name="__codelineno-12-574" href="#__codelineno-12-574"></a>
<a id="__codelineno-12-575" name="__codelineno-12-575" href="#__codelineno-12-575"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;primary-dictionary&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-get-primary-definition-dict</span> <span class="err">.</span> <span class="m">~</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-576" name="__codelineno-12-576" href="#__codelineno-12-576"></a>
<a id="__codelineno-12-577" name="__codelineno-12-577" href="#__codelineno-12-577"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">looks</span> <span class="nv">to</span> <span class="nv">see</span> <span class="nv">if</span> <span class="nv">another</span> <span class="nv">dictionary</span> <span class="nv">exists</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-578" name="__codelineno-12-578" href="#__codelineno-12-578"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;valid-dict&quot;</span> <span class="nv">false</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-579" name="__codelineno-12-579" href="#__codelineno-12-579"></a>
<a id="__codelineno-12-580" name="__codelineno-12-580" href="#__codelineno-12-580"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">definition.definitions</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-581" name="__codelineno-12-581" href="#__codelineno-12-581"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;test-dict-name&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">jpmn-get-dict-type</span> <span class="err">.</span> <span class="na">dictionaryName</span><span class="o">=</span><span class="nv">dictionary</span> <span class="m">~</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-582" name="__codelineno-12-582" href="#__codelineno-12-582"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="s2">&quot;&amp;&amp;&quot;</span> <span class="nv">(op</span> <span class="na">&quot;==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">monolingual</span><span class="s2">&quot;) (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;) dictionary))~}}</span>
<a id="__codelineno-12-583" name="__codelineno-12-583" href="#__codelineno-12-583"></a><span class="s2">                {{~#set &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot; true}}{{/set~}}</span>
<a id="__codelineno-12-584" name="__codelineno-12-584" href="#__codelineno-12-584"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-585" name="__codelineno-12-585" href="#__codelineno-12-585"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-586" name="__codelineno-12-586" href="#__codelineno-12-586"></a>
<a id="__codelineno-12-587" name="__codelineno-12-587" href="#__codelineno-12-587"></a><span class="s2">        {{~#if (get &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot;) ~}}</span>
<a id="__codelineno-12-588" name="__codelineno-12-588" href="#__codelineno-12-588"></a><span class="s2">            &lt;ol&gt;</span>
<a id="__codelineno-12-589" name="__codelineno-12-589" href="#__codelineno-12-589"></a><span class="s2">            {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-590" name="__codelineno-12-590" href="#__codelineno-12-590"></a><span class="s2">                {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-591" name="__codelineno-12-591" href="#__codelineno-12-591"></a><span class="s2">                {{~#if (op &quot;</span><span class="err">&amp;&amp;</span><span class="s2">&quot; (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">monolingual</span><span class="s2">&quot;) (op &quot;</span><span class="na">!=</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">primary-dictionary</span><span class="s2">&quot;) dictionary))~}}</span>
<a id="__codelineno-12-592" name="__codelineno-12-592" href="#__codelineno-12-592"></a><span class="s2">                    &lt;li data-details=&quot;</span><span class="err">{{~</span><span class="nv">dictionary</span><span class="m">~</span><span class="cp">}}</span><span class="x">&quot;&gt;</span>
<a id="__codelineno-12-593" name="__codelineno-12-593" href="#__codelineno-12-593"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-glossary-single</span> <span class="err">.</span> <span class="na">brief</span><span class="o">=</span><span class="nv">../brief</span> <span class="na">noDictionaryTag</span><span class="o">=</span><span class="nv">../noDictionaryTag</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-594" name="__codelineno-12-594" href="#__codelineno-12-594"></a><span class="x">                    &lt;/li&gt;</span>
<a id="__codelineno-12-595" name="__codelineno-12-595" href="#__codelineno-12-595"></a><span class="x">                </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-596" name="__codelineno-12-596" href="#__codelineno-12-596"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-597" name="__codelineno-12-597" href="#__codelineno-12-597"></a><span class="x">            &lt;/ol&gt;</span>
<a id="__codelineno-12-598" name="__codelineno-12-598" href="#__codelineno-12-598"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-599" name="__codelineno-12-599" href="#__codelineno-12-599"></a>
<a id="__codelineno-12-600" name="__codelineno-12-600" href="#__codelineno-12-600"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-601" name="__codelineno-12-601" href="#__codelineno-12-601"></a>
<a id="__codelineno-12-602" name="__codelineno-12-602" href="#__codelineno-12-602"></a><span class="cp">{{</span><span class="m m-Attribute">~/inline~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-603" name="__codelineno-12-603" href="#__codelineno-12-603"></a>
<a id="__codelineno-12-604" name="__codelineno-12-604" href="#__codelineno-12-604"></a>
<a id="__codelineno-12-605" name="__codelineno-12-605" href="#__codelineno-12-605"></a>
<a id="__codelineno-12-606" name="__codelineno-12-606" href="#__codelineno-12-606"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">pitch</span> <span class="nv">accent</span> <span class="nv">info</span><span class="err">:</span> <span class="nv">all</span> <span class="nv">pitch</span> <span class="nv">accent</span> <span class="nv">info</span> <span class="nv">dictionaries</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-607" name="__codelineno-12-607" href="#__codelineno-12-607"></a>
<a id="__codelineno-12-608" name="__codelineno-12-608" href="#__codelineno-12-608"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-utility-dictionaries&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-609" name="__codelineno-12-609" href="#__codelineno-12-609"></a>
<a id="__codelineno-12-610" name="__codelineno-12-610" href="#__codelineno-12-610"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-611" name="__codelineno-12-611" href="#__codelineno-12-611"></a>
<a id="__codelineno-12-612" name="__codelineno-12-612" href="#__codelineno-12-612"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">looks</span> <span class="nv">to</span> <span class="nv">see</span> <span class="nv">if</span> <span class="nv">another</span> <span class="nv">dictionary</span> <span class="nv">exists</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-613" name="__codelineno-12-613" href="#__codelineno-12-613"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;valid-dict&quot;</span> <span class="nv">false</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-614" name="__codelineno-12-614" href="#__codelineno-12-614"></a>
<a id="__codelineno-12-615" name="__codelineno-12-615" href="#__codelineno-12-615"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">definition.definitions</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-616" name="__codelineno-12-616" href="#__codelineno-12-616"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;test-dict-name&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">~&gt;</span> <span class="nv">jpmn-get-dict-type</span> <span class="err">.</span> <span class="na">dictionaryName</span><span class="o">=</span><span class="nv">dictionary</span> <span class="m">~</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-617" name="__codelineno-12-617" href="#__codelineno-12-617"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~#if</span> <span class="nv">(op</span> <span class="na">&quot;==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">utility</span><span class="s2">&quot;)~}}</span>
<a id="__codelineno-12-618" name="__codelineno-12-618" href="#__codelineno-12-618"></a><span class="s2">                {{~#set &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot; true}}{{/set~}}</span>
<a id="__codelineno-12-619" name="__codelineno-12-619" href="#__codelineno-12-619"></a><span class="s2">            {{~/if~}}</span>
<a id="__codelineno-12-620" name="__codelineno-12-620" href="#__codelineno-12-620"></a><span class="s2">        {{~/each~}}</span>
<a id="__codelineno-12-621" name="__codelineno-12-621" href="#__codelineno-12-621"></a>
<a id="__codelineno-12-622" name="__codelineno-12-622" href="#__codelineno-12-622"></a><span class="s2">        {{~#if (get &quot;</span><span class="nv">valid-dict</span><span class="s2">&quot;) ~}}</span>
<a id="__codelineno-12-623" name="__codelineno-12-623" href="#__codelineno-12-623"></a><span class="s2">            &lt;ol&gt;</span>
<a id="__codelineno-12-624" name="__codelineno-12-624" href="#__codelineno-12-624"></a><span class="s2">            {{~#each definition.definitions~}}</span>
<a id="__codelineno-12-625" name="__codelineno-12-625" href="#__codelineno-12-625"></a><span class="s2">                {{~#set &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;}}{{~&gt; jpmn-get-dict-type . dictionaryName=dictionary ~}}{{/set~}}</span>
<a id="__codelineno-12-626" name="__codelineno-12-626" href="#__codelineno-12-626"></a><span class="s2">                {{~#if (op &quot;</span><span class="na">==</span><span class="o">=</span><span class="s2">&quot; (get &quot;</span><span class="nv">test-dict-name</span><span class="s2">&quot;) &quot;</span><span class="nv">utility</span><span class="s2">&quot;)~}}</span>
<a id="__codelineno-12-627" name="__codelineno-12-627" href="#__codelineno-12-627"></a><span class="s2">                    &lt;li data-details=&quot;</span><span class="err">{{~</span><span class="nv">dictionary</span><span class="m">~</span><span class="cp">}}</span><span class="x">&quot;&gt;</span>
<a id="__codelineno-12-628" name="__codelineno-12-628" href="#__codelineno-12-628"></a><span class="x">                        </span><span class="cp">{{</span><span class="m m-Attribute">~&gt;</span> <span class="err">_</span><span class="nv">jpmn-glossary-single</span> <span class="err">.</span> <span class="na">brief</span><span class="o">=</span><span class="nv">../brief</span> <span class="na">noDictionaryTag</span><span class="o">=</span><span class="nv">../noDictionaryTag</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-629" name="__codelineno-12-629" href="#__codelineno-12-629"></a><span class="x">                    &lt;/li&gt;</span>
<a id="__codelineno-12-630" name="__codelineno-12-630" href="#__codelineno-12-630"></a><span class="x">                </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-631" name="__codelineno-12-631" href="#__codelineno-12-631"></a><span class="x">            </span><span class="cp">{{</span><span class="m m-Attribute">~/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-632" name="__codelineno-12-632" href="#__codelineno-12-632"></a><span class="x">            &lt;/ol&gt;</span>
<a id="__codelineno-12-633" name="__codelineno-12-633" href="#__codelineno-12-633"></a><span class="x">        </span><span class="cp">{{</span><span class="m m-Attribute">~/if~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-634" name="__codelineno-12-634" href="#__codelineno-12-634"></a>
<a id="__codelineno-12-635" name="__codelineno-12-635" href="#__codelineno-12-635"></a><span class="x">    </span><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-636" name="__codelineno-12-636" href="#__codelineno-12-636"></a>
<a id="__codelineno-12-637" name="__codelineno-12-637" href="#__codelineno-12-637"></a><span class="cp">{{</span><span class="m m-Attribute">~/inline~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-638" name="__codelineno-12-638" href="#__codelineno-12-638"></a>
<a id="__codelineno-12-639" name="__codelineno-12-639" href="#__codelineno-12-639"></a>
<a id="__codelineno-12-640" name="__codelineno-12-640" href="#__codelineno-12-640"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">a</span> <span class="nv">test</span> <span class="nv">to</span> <span class="nv">check</span> <span class="nv">if</span> <span class="nv">your</span> <span class="nv">dictionaries</span> <span class="nv">are</span> <span class="nv">correctly</span> <span class="nv">classified</span><span class="err">.</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-641" name="__codelineno-12-641" href="#__codelineno-12-641"></a><span class="cp">{{</span><span class="m m-Attribute">~!</span> <span class="nv">Only</span> <span class="nv">meant</span> <span class="nv">to</span> <span class="nv">be</span> <span class="nv">used</span> <span class="nv">for</span> <span class="nv">debugging</span> <span class="nv">purposes</span><span class="err">,</span> <span class="nv">not</span> <span class="nv">Anki</span><span class="err">.</span> <span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-642" name="__codelineno-12-642" href="#__codelineno-12-642"></a><span class="cp">{{</span><span class="m m-Attribute">~#*inline</span> <span class="s2">&quot;jpmn-test-dict-type&quot;</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-643" name="__codelineno-12-643" href="#__codelineno-12-643"></a><span class="cp">{{</span><span class="m m-Attribute">~#scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-644" name="__codelineno-12-644" href="#__codelineno-12-644"></a><span class="cp">{{</span><span class="m m-Attribute">~#each</span> <span class="nv">definition.definitions</span><span class="m">~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-645" name="__codelineno-12-645" href="#__codelineno-12-645"></a><span class="x">「</span><span class="cp">{{</span><span class="nv">dictionary</span><span class="cp">}}</span><span class="x">」: </span><span class="cp">{{</span><span class="k">&gt;</span> <span class="nv">jpmn-get-dict-type</span> <span class="err">.</span> <span class="na">dictionaryName</span><span class="o">=</span><span class="nv">dictionary</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-646" name="__codelineno-12-646" href="#__codelineno-12-646"></a><span class="cp">{{</span><span class="m m-Attribute">/each~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-647" name="__codelineno-12-647" href="#__codelineno-12-647"></a><span class="cp">{{</span><span class="m m-Attribute">~/scope~</span><span class="cp">}}</span><span class="x"></span>
<a id="__codelineno-12-648" name="__codelineno-12-648" href="#__codelineno-12-648"></a><span class="cp">{{</span><span class="m m-Attribute">~/inline~</span><span class="cp">}}</span><span class="x"></span>
</code></pre></div>
</details>
</li>
</ol>
<h3 id="make-an-example-card">Make an example card!<a class="headerlink" href="#make-an-example-card" title="Permanent link">&para;</a></h3>
<p>At this point, you should be able to make cards with Yomichan!</p>
<details class="example">
<summary>Click here to show some example Japanese sentences.</summary>
<p class="jp-quote-text">「や、いらっしゃい。ま、毒を食らわば皿までって言うしね。あ、違うか。乗り掛かった船？」</p>
<p class="jp-quote-text">「なによぅ…甲斐甲斐しく会いに来た女に対して、最初に言うセリフがそれ？」</p>
<p class="jp-quote-text">「あの時逃げ出した私の罰…あの時の汚辱は今ここで、全部そそいでやるんだ…」</p>
<p class="jp-quote-text">「貴方なんなんです？なにか、妙に銃口慣れしていますね…若者特有の空威張りという訳でもなさそうですし…」</p>
</details>
<p><a href="../assets/yomichan/add_card.gif"><img alt="adding a card with Yomichan" src="../assets/yomichan/add_card.gif" /></a></p>
<p>Obviously, just Yomichan alone doesn't fill every field.
Notably, the picture and sentence audio is missing.</p>
<p>Outside of that, there are some final settings you can adjust within the Yomichan templates
if the card doesn't look quite right.</p>
<p><br></p>
<h3 id="yomichan-templates-options">Yomichan Templates Options<a class="headerlink" href="#yomichan-templates-options" title="Permanent link">&para;</a></h3>
<h4 id="monolingual-definition">Monolingual Definition<a class="headerlink" href="#monolingual-definition" title="Permanent link">&para;</a></h4>
<p><i><sup>Main page: <a href="../yomichantemplates/#categorization-of-dictionaries">Yomichan Template Options (Categorization of Dictionaries)</a></sup></i></p>
<p>If you want the first definition you see (the <code>PrimaryDefinition</code> field) to be monolingual,
change the following line at the top of the templates code:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;opt-first-definition-type&quot;</span> <span class="s2">&quot;bilingual&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
</code></pre></div>
to
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cp">{{</span><span class="m m-Attribute">~#set</span> <span class="s2">&quot;opt-first-definition-type&quot;</span> <span class="s2">&quot;monolingual&quot;</span><span class="cp">}}{{</span><span class="m m-Attribute">/set~</span><span class="cp">}}</span><span class="x"></span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using monolingual dictionaries, on your first few cards,
please check that your dictionaries are in the expected places.
Extra bilingual definitions should be under <code>Secondary Definition</code>,
and extra monolingual definitions should be under <code>Extra Definitions</code>.</p>
<p>If your dictionaries are ending up in the wrong sections,
then it is likely a problem with how the template code categorizes the dictionaries.
See <a href="../yomichantemplates/#categorization-of-dictionaries" target="_blank">here</a> for more info.</p>
</div>
<h4 id="selected-text-as-the-definition">Selected Text as the Definition<a class="headerlink" href="#selected-text-as-the-definition" title="Permanent link">&para;</a></h4>
<p><i><sup>Main page: <a href="../yomichantemplates/#selected-text">Yomichan Template Options (Selected Text)</a></sup></i></p>
<p>If you want to select the text to use instead of the definition,
simply set <code>opt-selection-text-enabled</code> to <code>true</code>.</p>
<p><div class="video-container"><video style="width: 100%; height: 100%" controls  ><source src="../assets/yomichan/selected_text.mp4" type="video/mp4" /></video></div></p>
<p>By default, this enable the following behavior:</p>
<ol>
<li>If nothing is selected, then the first dictionary is chosen just like normal.</li>
<li>If a dictionary is selected, then that dictionary will replace the first definition.</li>
<li>If a section of text is selected, then that dictionary will replace the first definition.
    Additionally, that section of text will be highlighted (bolded).</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Selecting parts of a definition to bold the text does not always work,
especially when used across text with formatting or newlines.
See <a href="../yomichantemplates/#overriding-the-definition" target="_blank">this</a> for more details.</p>
<p>With this being said, selecting the dictionary should always work.</p>
</div>
<hr />
<h2 id="other">Other<a class="headerlink" href="#other" title="Permanent link">&para;</a></h2>
<h3 id="yomichan-appearance">Yomichan Appearance<a class="headerlink" href="#yomichan-appearance" title="Permanent link">&para;</a></h3>
<p>If you want to follow my exact Yomichan popup appearance, set the following
under (Yomichan settings) →  <code>Popup Appearance</code>:</p>
<ul>
<li>Set <code>Compact glossaries</code> to ON.</li>
<li>Set <code>Compact tags</code> to OFF.</li>
</ul>
<p>There are also plenty of css customizations for Yomichan listed out
in the <a href="../jpresources/" target="_blank">various resources page</a>.</p>
<h3 id="jmdict">JMdict<a class="headerlink" href="#jmdict" title="Permanent link">&para;</a></h3>
<p>If you are planning on using the JMdict dictionary,
the ones provided from most sources
(TMW's google drive, Matt's video on Yomichan, and Yomichan's main github page)
are all somewhat outdated, which usually means less accurate definitions and less coverage.</p>
<p>To get the most recent version of JMdict,
download it from the
<a href="https://www.edrdg.org/wiki/index.php/JMdict-EDICT_Dictionary_Project">official site</a>
and using <a href="https://github.com/FooSoft/yomichan-import">yomichan-import</a>
to get the latest JMdict version available.</p>
<p>If you don't want to compile it from source, I provide a download link
<a href="https://github.com/Aquafina-water-bottle/jmdict-english-yomichan">here</a>,
which should only be a few months stale at most.</p>
<!-- TODO github actions to re-compile it daily -->

<h3 id="jmdict-surface-forms">JMdict Surface Forms<a class="headerlink" href="#jmdict-surface-forms" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/FooSoft/yomichan/issues/2183">(Link)</a></p>
<p>This is a dictionary placed in the <code>UtilityDictionaries</code> field by default.
Although I don't use it when studying Anki, it helps to use this when creating Anki notes
for monolingual definitions.
See <a href="../jpresources/#orthographic-variants-fix-sentence-and-frequency" target="_blank">this section</a>
for more information.</p>
<h3 id="additional-anki-add-ons">Additional Anki add-on(s)<a class="headerlink" href="#additional-anki-add-ons" title="Permanent link">&para;</a></h3>
<p>These add-on(s) assist in card creation, but are ultimately optional.</p>
<ul>
<li>Paste Images As WebP <a href="https://ankiweb.net/shared/info/1151815987">(link)</a></li>
</ul>
<h3 id="separate-pitch-accent-deck">Separate Pitch Accent Deck<a class="headerlink" href="#separate-pitch-accent-deck" title="Permanent link">&para;</a></h3>
<p>If you want card types to go to a different deck by default, you can change it by doing the following:</p>
<details class="example">
<summary>Click here to reveal instructions</summary>
<p><code>Browse</code> (top middle) <br>
→  <code>Cards...</code> (around the middle of the screen, right above first field of the note. This is NOT the <code>Cards</code> dropdown menu at the top right corner) <br>
→  <code>Card Type</code> dropdown (top of the screen) <br>
→  (choose pitch accent card type) <br>
→  <code>Options</code> (the first <code>Options</code> you see at the very top of the screen) <br>
→  <code>Deck Override...</code></p>
</details>
<hr />
<h2 id="enjoy-your-new-one-click-cards">Enjoy your new one-click cards!<a class="headerlink" href="#enjoy-your-new-one-click-cards" title="Permanent link">&para;</a></h2>
<p>If you've made it this far, then congratulations!
Most fields of the cards have been automatically filled out, just from Yomichan alone!</p>
<p>If you already have a sentence mining workflow set up,
outside of some potentially minor tweaks to your current workflow (i.e. to match the field names),
<strong>you are now finished</strong>!
All that's left is understanding how to use and edit the card itself.
Head over to <a href="../usage/">Usage</a> to see exactly that.</p>
<h2 id="wait-i-dont-have-a-workflow-setup-yet">Wait! I don't have a workflow setup yet!<a class="headerlink" href="#wait-i-dont-have-a-workflow-setup-yet" title="Permanent link">&para;</a></h2>
<p>If you're new to sentence mining, there are likely some things things
that you would like to set up. These include:</p>
<ol>
<li>Getting the actual text to use Yomichan on.</li>
<li>Getting the pictures and/or sentence audio from the media into the card.</li>
</ol>
<p>Head over to the <a href="../setupeverythingelse/">Setup: Everything Else</a> page to see exactly that.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 20, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "toc.follow", "header.autohide", "navigation.sections", "content.code.annotate"], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>